<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Business Search | AblesAI</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NLL9GDQY8S"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-NLL9GDQY8S');
  </script>
  <!-- Cookiebot Consent -->
  <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="f4131404-42af-4d2e-9472-473077a790bb" type="text/javascript" async></script>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3CradialGradient id='pg' cx='35%25' cy='35%25' r='60%25'%3E%3Cstop offset='0%25' stop-color='%23fcd34d'/%3E%3Cstop offset='50%25' stop-color='%23eab308'/%3E%3Cstop offset='100%25' stop-color='%23ca8a04'/%3E%3C/radialGradient%3E%3ClinearGradient id='rg' x1='0%25' y1='0%25' x2='100%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%23f97316'/%3E%3Cstop offset='100%25' stop-color='%23dc2626'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cellipse cx='32' cy='32' rx='28' ry='8' stroke='url(%23rg)' stroke-width='2.5' fill='none' transform='rotate(-20 32 32)' stroke-dasharray='70 140' opacity='0.6'/%3E%3Ccircle cx='32' cy='32' r='12' fill='url(%23pg)'/%3E%3Cellipse cx='28' cy='28' rx='4' ry='3' fill='%23fef3c7' opacity='0.4'/%3E%3Cellipse cx='32' cy='32' rx='28' ry='8' stroke='url(%23rg)' stroke-width='2.5' fill='none' transform='rotate(-20 32 32)' stroke-dasharray='70 140' stroke-dashoffset='-70'/%3E%3Ccircle cx='58' cy='28' r='4' fill='%23a855f7'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0a;
      --bg-secondary: #111111;
      --bg-tertiary: #1a1a1a;
      --bg-card: #111111;
      --text-primary: #f5f5f5;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --accent: #eab308;
      --accent-light: #facc15;
      --tier-a: #22c55e;
      --tier-b: #84cc16;
      --tier-c: #eab308;
      --tier-d: #f97316;
      --tier-e: #ef4444;
      --accent-blue: #3b82f6;
      --accent-purple: #a855f7;
      --border-primary: #27272a;
      --border-secondary: #1f1f22;
      --glow-gold: rgba(234, 179, 8, 0.15);
    }

    [data-theme="light"] {
      --bg-primary: #f8f9fa;
      --bg-secondary: #ffffff;
      --bg-tertiary: #e9ecef;
      --bg-card: #ffffff;
      --text-primary: #1a1a2e;
      --text-secondary: #374151;
      --text-muted: #5a5a6e;
      --border-primary: #d1d5db;
      --border-secondary: #e5e7eb;
    }

    [data-theme="light"] .bg-grid {
      background-image: 
        linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
    }

    [data-theme="light"] .bg-gradient {
      background: radial-gradient(ellipse at 50% 0%, rgba(234, 179, 8, 0.08) 0%, transparent 60%);
    }

    [data-theme="light"] .result-card {
      box-shadow: 0 2px 8px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05);
    }

    [data-theme="light"] .profile-item {
      background: #f8f9fa;
      border-color: #e5e7eb;
    }

    [data-theme="light"] .reasoning-box,
    [data-theme="light"] .owners-section {
      background: #f8f9fa;
      border-color: #e5e7eb;
    }

    [data-theme="light"] .routing-queue {
      background: linear-gradient(135deg, rgba(234, 179, 8, 0.08), rgba(234, 179, 8, 0.03));
      border-color: rgba(234, 179, 8, 0.3);
    }

    [data-theme="light"] .search-input-container {
      background: #ffffff;
      border-color: #d1d5db;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    [data-theme="light"] .model-btn {
      background: #ffffff;
      border-color: #d1d5db;
    }

    [data-theme="light"] .search-logo-large svg {
      filter: drop-shadow(0 0 20px rgba(234, 179, 8, 0.4));
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      padding-top: 65px;
    }

    /* Background Effects */
    .bg-grid {
      position: fixed;
      inset: 0;
      background-image: 
        linear-gradient(rgba(234, 179, 8, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(234, 179, 8, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    .bg-gradient {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      height: 600px;
      background: radial-gradient(ellipse 80% 50% at 50% 0%, var(--glow-gold), transparent);
      pointer-events: none;
      z-index: 0;
    }

    /* Orbital Animation System */
    .orbit-system {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 800px;
      height: 800px;
      pointer-events: none;
      z-index: 0;
      opacity: 0.5;
    }

    .orbit-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      background: radial-gradient(circle, rgba(234, 179, 8, 0.4) 0%, rgba(234, 179, 8, 0.1) 40%, transparent 70%);
      border-radius: 50%;
      filter: blur(20px);
    }

    .orbit-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      border: 1px solid rgba(234, 179, 8, 0.12);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    .orbit-ring-1 { width: 300px; height: 300px; animation: orbit-rotate 30s linear infinite; }
    .orbit-ring-2 { width: 450px; height: 450px; animation: orbit-rotate 45s linear infinite reverse; }
    .orbit-ring-3 { width: 600px; height: 600px; animation: orbit-rotate 60s linear infinite; }

    @keyframes orbit-rotate {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .orbit-particle {
      position: absolute;
      border-radius: 50%;
      top: 50%;
      left: 50%;
    }

    .particle-1 { width: 10px; height: 10px; background: #eab308; box-shadow: 0 0 15px 5px rgba(234, 179, 8, 0.5); animation: orb1 20s linear infinite; }
    .particle-2 { width: 8px; height: 8px; background: #a855f7; box-shadow: 0 0 12px 4px rgba(168, 85, 247, 0.5); animation: orb2 25s linear infinite; }
    .particle-3 { width: 6px; height: 6px; background: #22c55e; box-shadow: 0 0 10px 3px rgba(34, 197, 94, 0.5); animation: orb3 18s linear infinite reverse; }
    .particle-4 { width: 8px; height: 8px; background: #f97316; box-shadow: 0 0 12px 4px rgba(249, 115, 22, 0.5); animation: orb4 30s linear infinite; }
    .particle-5 { width: 5px; height: 5px; background: #3b82f6; box-shadow: 0 0 10px 3px rgba(59, 130, 246, 0.5); animation: orb5 22s linear infinite reverse; }
    .particle-6 { width: 7px; height: 7px; background: #ec4899; box-shadow: 0 0 12px 4px rgba(236, 72, 153, 0.5); animation: orb6 35s linear infinite; }

    @keyframes orb1 { from { transform: translate(-50%, -50%) rotate(0deg) translateX(150px); } to { transform: translate(-50%, -50%) rotate(360deg) translateX(150px); } }
    @keyframes orb2 { from { transform: translate(-50%, -50%) rotate(60deg) translateX(225px); } to { transform: translate(-50%, -50%) rotate(420deg) translateX(225px); } }
    @keyframes orb3 { from { transform: translate(-50%, -50%) rotate(120deg) translateX(300px); } to { transform: translate(-50%, -50%) rotate(480deg) translateX(300px); } }
    @keyframes orb4 { from { transform: translate(-50%, -50%) rotate(180deg) translateX(175px); } to { transform: translate(-50%, -50%) rotate(540deg) translateX(175px); } }
    @keyframes orb5 { from { transform: translate(-50%, -50%) rotate(240deg) translateX(275px); } to { transform: translate(-50%, -50%) rotate(600deg) translateX(275px); } }
    @keyframes orb6 { from { transform: translate(-50%, -50%) rotate(300deg) translateX(250px); } to { transform: translate(-50%, -50%) rotate(660deg) translateX(250px); } }

    /* Header */
    .main-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 65px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: transparent;
      backdrop-filter: none;
      border-bottom: none;
      z-index: 100;
    }

    [data-theme="light"] .main-header {
      background: transparent;
    }

    /* Light mode moon color cycle */
    [data-theme="light"] .moon-base {
      animation-name: orbit, moonColorLight, moonBackOpacity !important;
    }
    [data-theme="light"] .moon-front {
      animation-name: orbit, moonColorLight, moonFrontOpacity !important;
    }
    @keyframes moonColorLight {
      0%, 100% { fill: #10b981; }
      20% { fill: #3b82f6; }
      40% { fill: #ec4899; }
      60% { fill: #a855f7; }
      80% { fill: #eab308; }
    }

    .header-logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .header-logo svg {
      width: 32px;
      height: 32px;
    }

    .header-logo h1 {
      font-size: 1.25rem;
      font-weight: 800;
      color: var(--text-primary);
      letter-spacing: -0.5px;
    }

    .header-logo h1 span {
      color: var(--text-muted);
    }

    [data-theme="light"] .header-logo h1 {
      color: #111827;
    }

    [data-theme="light"] .header-logo h1 span {
      color: var(--accent);
    }

    .theme-toggle {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      transition: all 0.2s;
    }

    .theme-toggle:hover {
      color: var(--text-primary);
    }

    [data-theme="light"] .theme-toggle {
      color: #4b5563;
    }

    [data-theme="light"] .theme-toggle:hover {
      color: #111827;
    }

    .theme-toggle svg {
      width: 16px;
      height: 16px;
    }

    .sun-icon { display: none; }
    [data-theme="light"] .sun-icon { display: block; }
    [data-theme="light"] .moon-icon { display: none; }

    .tab-nav {
      display: flex;
      gap: 4px;
    }

    .tab-btn {
      padding: 8px 16px;
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      background: transparent;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .tab-btn:hover {
      color: var(--text-primary);
      background: var(--bg-secondary);
    }

    .tab-btn.active {
      color: var(--accent);
      background: transparent;
    }

    .lite-badge {
      font-size: 10px;
      font-weight: 700;
      padding: 3px 8px;
      background: #a855f7;
      color: #fff;
      border-radius: 4px;
      margin-left: 6px;
      text-transform: none;
    }

    .free-badge {
      font-size: 10px;
      font-weight: 700;
      padding: 3px 8px;
      background: #22c55e;
      color: #000;
      border-radius: 4px;
      margin-left: 6px;
      text-transform: none;
    }

    [data-theme="light"] .tab-btn {
      color: #374151;
    }

    [data-theme="light"] .tab-btn:hover {
      background: rgba(0,0,0,0.05);
      color: #111827;
    }

    [data-theme="light"] .tab-btn.active {
      background: transparent;
      color: #b45309;
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
      position: relative;
      z-index: 1;
    }

    /* Search Section - Centered Hero */
    .search-section {
      min-height: calc(100vh - 200px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem 0;
    }

    .search-section.has-results {
      min-height: auto;
      padding: 1rem 0 2rem;
    }

    /* Large Logo */
    .search-logo-large {
      width: 120px;
      height: 120px;
      margin-bottom: 2rem;
    }

    .search-logo-large svg {
      width: 100%;
      height: 100%;
    }

    /* Title */
    .search-title {
      font-size: clamp(2.5rem, 6vw, 4rem);
      font-weight: 700;
      letter-spacing: -2px;
      margin-bottom: 0.5rem;
    }

    .search-title .accent {
      color: var(--accent);
    }

    .search-title .white {
      color: var(--text-primary);
    }

    .search-title .muted {
      color: var(--text-muted);
    }

    .search-subtitle {
      font-size: 1.1rem;
      color: var(--text-muted);
      margin-bottom: 2.5rem;
      font-weight: 400;
    }

    /* Search Box */
    .search-box {
      width: 100%;
      max-width: 700px;
      margin: 0 auto;
    }

    .search-input-container {
      display: flex;
      align-items: center;
      background: var(--bg-card);
      border: 1px solid var(--border-primary);
      border-radius: 50px;
      padding: 8px 8px 8px 24px;
      gap: 12px;
      margin-bottom: 1.5rem;
    }

    .search-input-container:focus-within {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--glow-gold);
    }

    .search-input-container input[type="text"],
    .search-input-container input[type="search"] {
      flex: 1;
      min-width: 0;
      padding: 0.75rem 0;
      background: transparent;
      border: none;
      color: var(--text-primary);
      font-size: 1.1rem;
      font-family: inherit;
    }

    .search-input-container input[type="text"]:focus,
    .search-input-container input[type="search"]:focus {
      outline: none;
    }

    .search-input-container input[type="text"]::placeholder,
    .search-input-container input[type="search"]::placeholder {
      color: var(--text-muted);
    }

    /* Hide search cancel button in webkit */
    .search-input-container input[type="search"]::-webkit-search-cancel-button {
      -webkit-appearance: none;
      appearance: none;
    }

    .api-key-inline {
      display: flex;
      align-items: center;
    }

    .api-key-inline input {
      width: 140px;
      padding: 0.5rem 0;
      background: transparent;
      border: none;
      color: var(--text-muted);
      font-size: 1rem;
      font-family: inherit;
      letter-spacing: 2px;
      text-align: center;
      -webkit-text-security: disc;
    }

    .api-key-inline input:-webkit-autofill,
    .api-key-inline input:-webkit-autofill:hover,
    .api-key-inline input:-webkit-autofill:focus,
    .search-input-container input:-webkit-autofill,
    .search-input-container input:-webkit-autofill:hover,
    .search-input-container input:-webkit-autofill:focus,
    .search-input-container input[type="search"]:-webkit-autofill,
    .search-input-container input[type="search"]:-webkit-autofill:hover,
    .search-input-container input[type="search"]:-webkit-autofill:focus {
      -webkit-box-shadow: 0 0 0 1000px var(--bg-card) inset !important;
      -webkit-text-fill-color: var(--text-primary) !important;
      background-color: var(--bg-card) !important;
      background: var(--bg-card) !important;
      caret-color: var(--text-primary) !important;
      transition: background-color 5000s ease-in-out 0s !important;
    }

    .api-key-inline input:focus {
      outline: none;
      color: var(--text-primary);
    }

    .api-key-inline input::placeholder {
      color: var(--text-muted);
      letter-spacing: 0;
    }

    .search-btn-round {
      width: 56px;
      height: 56px;
      min-width: 56px;
      background: var(--accent);
      border: none;
      border-radius: 50%;
      color: #000;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .search-btn-round:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(234, 179, 8, 0.4);
    }

    .search-btn-round:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .search-btn-round svg {
      width: 28px;
      height: 28px;
    }

    /* Model Toggle */
    .model-toggle {
      display: flex;
      justify-content: center;
      gap: 1rem;
    }

    .model-btn {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.75rem 1.5rem;
      background: transparent;
      border: 2px solid var(--border-primary);
      border-radius: 50px;
      color: var(--text-muted);
      font-size: 1rem;
      font-weight: 600;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.2s;
    }

    .model-btn:hover {
      border-color: var(--text-muted);
      color: var(--text-primary);
    }

    .model-btn.active {
      border-color: var(--accent);
      color: var(--accent);
    }

    .model-badge {
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 700;
    }

    .model-badge.flash {
      background: #22c55e;
      color: #000;
    }

    .model-badge.pro {
      background: #8b5cf6;
      color: #fff;
    }

    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 10px;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      color: var(--tier-e);
      font-size: 0.85rem;
      display: none;
      text-align: left;
    }

    .error-message.active {
      display: block;
    }

    /* Results Section */
    .results-section {
      display: none;
      max-width: 900px;
      margin: 2rem auto 0;
    }

    .results-section.active {
      display: block;
    }

    .prediction-card {
      background: var(--bg-card);
      border: 1px solid var(--border-primary);
      border-radius: 16px;
      padding: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    .prediction-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent-light), var(--tier-d));
    }

    .prediction-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }

    .state-badge {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .state-code {
      font-size: 3rem;
      font-weight: 800;
      color: var(--accent);
      line-height: 1;
      letter-spacing: -2px;
    }

    .state-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .state-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .confidence-meter {
      text-align: right;
    }

    .confidence-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--tier-a);
      line-height: 1;
    }

    .confidence-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Entity Profile */
    .entity-profile {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
      margin-bottom: 1.25rem;
    }

    .profile-item {
      background: var(--bg-secondary);
      padding: 1rem;
      border-radius: 10px;
      border: 1px solid var(--border-secondary);
    }

    .profile-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }

    .profile-value {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
      flex: 1;
    }

    .profile-value-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .copy-btn {
      background: transparent;
      border: none;
      padding: 4px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.2s, color 0.2s;
      color: var(--text-muted);
      border-radius: 4px;
      flex-shrink: 0;
    }

    .copy-btn svg {
      width: 14px;
      height: 14px;
    }

    .profile-item:hover .copy-btn {
      opacity: 0.6;
    }

    .copy-btn:hover {
      opacity: 1 !important;
      color: var(--accent);
    }

    .copy-btn.copied {
      color: var(--tier-a);
      opacity: 1;
    }

    .copy-btn-header {
      position: absolute;
      right: 8px;
      top: 8px;
      opacity: 0;
    }

    .state-badge,
    .confidence-meter {
      position: relative;
    }

    .state-badge:hover .copy-btn-header,
    .confidence-meter:hover .copy-btn-header {
      opacity: 0.6;
    }

    .copy-btn-header:hover {
      opacity: 1 !important;
    }

    .copy-btn-owners {
      margin-left: auto;
      opacity: 0.4;
    }

    .owners-title:hover .copy-btn-owners {
      opacity: 0.7;
    }

    .copy-btn-owners:hover {
      opacity: 1 !important;
    }

    .profile-value.status-active {
      color: var(--tier-a);
    }

    .profile-value.status-inactive {
      color: var(--tier-e);
    }

    /* Owners Section */
    .owners-section {
      background: var(--bg-secondary);
      border: 1px solid var(--border-secondary);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1.25rem;
    }

    .owners-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent);
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
    }

    .owners-title svg {
      width: 14px;
      height: 14px;
    }

    .owners-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .owner-tag {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-primary);
      padding: 0.4rem 0.75rem;
      border-radius: 6px;
      font-size: 0.8rem;
      color: var(--text-primary);
    }

    .owner-tag .owner-title {
      color: var(--text-muted);
      font-size: 0.7rem;
      margin-left: 0.25rem;
    }

    /* Reasoning */
    .reasoning-box {
      background: var(--bg-secondary);
      border: 1px solid var(--border-secondary);
      border-radius: 12px;
      padding: 1rem;
    }

    .reasoning-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent);
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 700;
    }

    .reasoning-title svg {
      width: 14px;
      height: 14px;
    }

    .reasoning-text {
      font-size: 0.85rem;
      line-height: 1.7;
      color: var(--text-secondary);
    }

    /* Routing Queue */
    .routing-queue {
      margin-top: 1.25rem;
    }

    .queue-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .queue-states {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .queue-state {
      padding: 0.4rem 0.75rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    .queue-state:first-child {
      background: var(--glow-gold);
      border-color: var(--accent);
      color: var(--accent);
    }

    .queue-state .priority {
      font-size: 0.65rem;
      color: var(--text-muted);
      font-weight: 400;
    }

    /* Sources */
    .sources-section {
      margin-top: 1.25rem;
      padding-top: 1.25rem;
      border-top: 1px solid var(--border-secondary);
    }

    .sources-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .source-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.6rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 4px;
      font-size: 0.7rem;
      color: var(--text-secondary);
    }

    .copy-all-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
      margin-top: 1.5rem;
      padding: 0.75rem 1rem;
      background: transparent;
      border: 1px dashed var(--border-primary);
      border-radius: 8px;
      color: var(--text-muted);
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .copy-all-btn svg {
      width: 16px;
      height: 16px;
    }

    .copy-all-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(234, 179, 8, 0.05);
    }

    .copy-all-btn.copied {
      border-color: var(--tier-a);
      color: var(--tier-a);
      background: rgba(34, 197, 94, 0.05);
    }

    /* ==================== PONG GAME LOADING OVERLAY ==================== */
    .loading-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }

    .loading-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    #pongCanvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }

    .pong-ui {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 10;
      pointer-events: none;
    }

    .pong-header {
      margin-bottom: 1rem;
    }

    .pong-query {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .pong-query span {
      color: var(--accent);
      font-weight: 600;
    }

    .pong-model {
      font-size: 0.75rem;
      color: var(--text-muted);
      opacity: 0.7;
    }

    .pong-status {
      margin-bottom: 1rem;
    }

    .pong-status span {
      font-size: 0.85rem;
      color: var(--text-secondary);
      display: block;
      margin-bottom: 0.5rem;
    }

    .pong-progress {
      width: 200px;
      height: 4px;
      background: var(--border-primary);
      border-radius: 2px;
      overflow: hidden;
      margin: 0 auto;
    }

    .pong-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--tier-a));
      border-radius: 2px;
      width: 0%;
      transition: width 0.5s ease;
    }

    .pong-instructions {
      font-size: 0.7rem;
      color: var(--text-muted);
      opacity: 0.6;
    }

    .pong-key {
      display: inline-block;
      padding: 2px 6px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 4px;
      font-family: monospace;
      margin: 0 2px;
    }

    .pong-score {
      position: absolute;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 3rem;
      font-weight: 700;
      color: var(--text-primary);
      opacity: 0.15;
      z-index: 5;
      pointer-events: none;
      font-variant-numeric: tabular-nums;
    }

    .pong-divider {
      margin: 0 0.5rem;
      color: var(--text-muted);
    }

    /* Pong Trigger Button - Inline Centered */
    .pong-trigger-inline {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 44px;
      height: 44px;
      margin: 1.5rem auto 0;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
      opacity: 0.7;
    }

    .pong-trigger-inline svg {
      width: 20px;
      height: 20px;
      color: var(--text-secondary);
      transition: color 0.3s;
    }

    .pong-trigger-inline:hover {
      opacity: 1;
      border-color: var(--accent);
      transform: scale(1.15);
      box-shadow: 0 4px 20px rgba(234, 179, 8, 0.4);
    }

    .pong-trigger-inline:hover svg {
      color: var(--accent);
    }

    /* Standalone Pong Overlay */
    .pong-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }

    .pong-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .pong-overlay canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }

    .pong-ui-standalone {
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 10;
      pointer-events: none;
    }

    .pong-title {
      font-size: 0.8rem;
      letter-spacing: 0.3em;
      color: var(--text-muted);
      opacity: 0.5;
      margin-bottom: 0.5rem;
    }

    .pong-score-large {
      font-size: 4rem;
      font-weight: 700;
      color: var(--text-primary);
      font-variant-numeric: tabular-nums;
      line-height: 1;
    }

    .pong-score-large span:first-child {
      color: var(--accent);
    }

    .pong-score-large span:last-child {
      color: #a855f7;
    }

    .pong-vs {
      font-size: 1.5rem;
      margin: 0 1rem;
      color: var(--text-muted);
      opacity: 0.5;
    }

    .pong-labels {
      display: flex;
      justify-content: center;
      gap: 6rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-top: 0.5rem;
    }

    .pong-controls {
      position: absolute;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 10;
    }

    .pong-instructions-standalone {
      font-size: 0.75rem;
      color: var(--text-muted);
      opacity: 0.6;
      margin-bottom: 0.5rem;
    }

    .pong-game-info {
      font-size: 0.7rem;
      color: var(--text-muted);
      opacity: 0.4;
    }

    /* Difficulty Modes */
    .pong-difficulty {
      position: absolute;
      bottom: 30px;
      left: 30px;
      display: flex;
      flex-direction: row;
      gap: 0.5rem;
      z-index: 15;
    }

    .difficulty-label {
      display: none;
    }

    .difficulty-btn {
      padding: 0.5rem 1rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 8px;
      color: var(--text-muted);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: all 0.2s;
      min-width: 90px;
      text-align: center;
    }

    .difficulty-btn:hover {
      border-color: var(--text-secondary);
      color: var(--text-primary);
    }

    .difficulty-btn.active {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(234, 179, 8, 0.1);
    }

    .difficulty-btn.easy { --diff-color: #22c55e; }
    .difficulty-btn.pro { --diff-color: #eab308; }
    .difficulty-btn.expert { --diff-color: #ef4444; }

    .difficulty-btn.easy.active { border-color: #22c55e; color: #22c55e; background: rgba(34, 197, 94, 0.1); }
    .difficulty-btn.pro.active { border-color: #eab308; color: #eab308; background: rgba(234, 179, 8, 0.1); }
    .difficulty-btn.expert.active { border-color: #ef4444; color: #ef4444; background: rgba(239, 68, 68, 0.1); }

    .difficulty-label {
      font-size: 0.6rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
      text-align: center;
    }

    .pong-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 44px;
      height: 44px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
      transition: all 0.2s;
    }

    .pong-close svg {
      width: 20px;
      height: 20px;
      color: var(--text-muted);
    }

    .pong-close:hover {
      border-color: var(--tier-e);
      background: rgba(239, 68, 68, 0.1);
    }

    .pong-close:hover svg {
      color: var(--tier-e);
    }

    /* Leaderboard */
    .pong-leaderboard {
      position: absolute;
      bottom: 30px;
      right: 30px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 12px;
      padding: 1rem;
      min-width: 180px;
      z-index: 15;
    }

    .leaderboard-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent);
      margin-bottom: 0.75rem;
      font-weight: 700;
    }

    .leaderboard-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .leaderboard-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8rem;
    }

    .leaderboard-rank {
      width: 20px;
      height: 20px;
      background: var(--bg-tertiary);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      font-weight: 700;
      color: var(--text-muted);
    }

    .leaderboard-rank.gold {
      background: linear-gradient(135deg, #fcd34d, #eab308);
      color: #000;
    }

    .leaderboard-rank.silver {
      background: linear-gradient(135deg, #e5e7eb, #9ca3af);
      color: #000;
    }

    .leaderboard-rank.bronze {
      background: linear-gradient(135deg, #fdba74, #ea580c);
      color: #000;
    }

    .leaderboard-score {
      color: var(--text-primary);
      font-weight: 600;
    }

    .leaderboard-date {
      color: var(--text-muted);
      font-size: 0.65rem;
      margin-left: auto;
    }

    .leaderboard-empty {
      color: var(--text-muted);
      font-size: 0.75rem;
      font-style: italic;
    }

    /* Game Over */
    .pong-game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 30;
      background: var(--bg-secondary);
      border: 2px solid var(--border-primary);
      border-radius: 20px;
      padding: 2rem 3rem;
      display: none;
    }

    .pong-game-over.active {
      display: block;
      animation: popIn 0.3s ease;
    }

    @keyframes popIn {
      from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
      to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    .game-over-text {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .game-over-text.win {
      color: var(--tier-a);
    }

    .game-over-text.lose {
      color: var(--tier-e);
    }

    .game-over-score {
      font-size: 1.5rem;
      color: var(--text-muted);
      margin-bottom: 1.5rem;
    }

    .play-again-btn {
      background: var(--accent);
      color: #000;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .play-again-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(234, 179, 8, 0.4);
    }

    @media (max-width: 768px) {
      .pong-leaderboard {
        display: none;
      }
      .pong-score-large {
        font-size: 3rem;
      }
      .pong-difficulty {
        left: 50%;
        transform: translateX(-50%);
      }
      .difficulty-btn {
        min-width: 60px;
        padding: 0.4rem 0.6rem;
        font-size: 0.65rem;
      }
      .pong-controls {
        bottom: 90px;
      }
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 3rem 0 2rem;
      color: var(--text-muted);
      font-size: 0.8rem;
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .tab-nav { display: none; }
      .entity-profile { grid-template-columns: repeat(2, 1fr); }
      .search-title { font-size: 2rem; }
      .search-input-container {
        flex-wrap: wrap;
        border-radius: 24px;
        padding: 12px;
      }
      .search-input-container input[type="text"],
      .search-input-container input[type="search"] {
        width: 100%;
        padding: 0.5rem;
      }
      .api-key-inline {
        flex: 1;
      }
      .api-key-inline input {
        width: 100%;
      }
      .model-toggle {
        flex-direction: column;
        gap: 0.5rem;
      }
      .model-btn {
        justify-content: center;
      }
      .pong-score {
        font-size: 2rem;
        top: 70px;
      }
    }

    @media (max-width: 480px) {
      .entity-profile { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="bg-grid"></div>
  <div class="bg-gradient"></div>
  
  <!-- Orbital Animation -->
  <div class="orbit-system">
    <div class="orbit-center"></div>
    <div class="orbit-ring orbit-ring-1"></div>
    <div class="orbit-ring orbit-ring-2"></div>
    <div class="orbit-ring orbit-ring-3"></div>
    <div class="orbit-particle particle-1"></div>
    <div class="orbit-particle particle-2"></div>
    <div class="orbit-particle particle-3"></div>
    <div class="orbit-particle particle-4"></div>
    <div class="orbit-particle particle-5"></div>
    <div class="orbit-particle particle-6"></div>
  </div>

  <!-- Header -->
  <header class="main-header">
    <div class="header-logo">
      <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- Planet gradient -->
          <radialGradient id="planetGrad" cx="35%" cy="35%" r="60%">
            <stop offset="0%" stop-color="#fcd34d"/>
            <stop offset="50%" stop-color="#eab308"/>
            <stop offset="100%" stop-color="#ca8a04"/>
          </radialGradient>
          <!-- Planet glow -->
          <filter id="planetGlow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="glow"/>
            <feMerge>
              <feMergeNode in="glow"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
          <!-- Ring gradient -->
          <linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#ffab40"/>
            <stop offset="50%" stop-color="#ff8c00"/>
            <stop offset="100%" stop-color="#ff6d00"/>
          </linearGradient>
          <!-- Moon glow -->
          <filter id="moonGlow" x="-100%" y="-100%" width="300%" height="300%">
            <feGaussianBlur stdDeviation="1.5" result="glow"/>
            <feMerge>
              <feMergeNode in="glow"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>
        <style>
          .moon-base {
            transform-origin: 32px 32px;
            animation: orbit 3s linear infinite, moonColor 2s ease-in-out infinite;
            filter: url(#moonGlow);
          }
          .moon-back {
            animation: orbit 3s linear infinite, moonColor 2s ease-in-out infinite, moonBackOpacity 3s linear infinite;
          }
          .moon-front {
            animation: orbit 3s linear infinite, moonColor 2s ease-in-out infinite, moonFrontOpacity 3s linear infinite;
          }
          @keyframes orbit {
            0% { transform: rotate(-20deg) translate(26px, 0) scale(1); }
            12.5% { transform: rotate(-20deg) translate(18px, 5px) scale(0.85); }
            25% { transform: rotate(-20deg) translate(0, 7px) scale(0.7); }
            37.5% { transform: rotate(-20deg) translate(-18px, 5px) scale(0.55); }
            50% { transform: rotate(-20deg) translate(-26px, 0) scale(0.5); }
            62.5% { transform: rotate(-20deg) translate(-18px, -5px) scale(0.55); }
            75% { transform: rotate(-20deg) translate(0, -7px) scale(0.7); }
            87.5% { transform: rotate(-20deg) translate(18px, -5px) scale(0.85); }
            100% { transform: rotate(-20deg) translate(26px, 0) scale(1); }
          }
          @keyframes moonBackOpacity {
            0%, 15% { opacity: 0; }
            25% { opacity: 1; }
            75% { opacity: 1; }
            85%, 100% { opacity: 0; }
          }
          @keyframes moonFrontOpacity {
            0%, 15% { opacity: 1; }
            25% { opacity: 0; }
            75% { opacity: 0; }
            85%, 100% { opacity: 1; }
          }
          @keyframes moonColor {
            0%, 100% { fill: #a855f7; }
            25% { fill: #3b82f6; }
            50% { fill: #ec4899; }
            75% { fill: #10b981; }
          }
        </style>
        <!-- Back half of ring (behind planet) -->
        <ellipse cx="32" cy="32" rx="28" ry="8" stroke="url(#ringGrad)" stroke-width="2.5" fill="none" transform="rotate(-20 32 32)" stroke-dasharray="70 140" opacity="0.6"/>
        <!-- Moon behind planet (rendered before planet) -->
        <circle class="moon-base moon-back" cx="32" cy="32" r="4" fill="#a855f7"/>
        <!-- Planet shadow/atmosphere -->
        <circle cx="32" cy="32" r="14" fill="#eab308" opacity="0.2" filter="url(#planetGlow)"/>
        <!-- Planet -->
        <circle cx="32" cy="32" r="12" fill="url(#planetGrad)" filter="url(#planetGlow)"/>
        <!-- Planet highlight -->
        <ellipse cx="28" cy="28" rx="4" ry="3" fill="#fef3c7" opacity="0.4"/>
        <!-- Front half of ring (in front of planet) -->
        <ellipse cx="32" cy="32" rx="28" ry="8" stroke="url(#ringGrad)" stroke-width="2.5" fill="none" transform="rotate(-20 32 32)" stroke-dasharray="70 140" stroke-dashoffset="-70"/>
        <!-- Moon in front of planet (rendered after planet) -->
        <circle class="moon-base moon-front" cx="32" cy="32" r="4" fill="#a855f7"/>
      </svg>
      <h1>Ables<span>AI</span></h1>
      <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode">
        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
    </div>
    <nav class="tab-nav">
      <a href="https://ables.ai" class="tab-btn">Home</a>
      <a href="https://ables.ai/calculator.html" class="tab-btn">Calculator<span class="lite-badge">LITE</span></a>
      <a href="https://ables.ai/toolbox.html" class="tab-btn">Toolbox<span class="free-badge">FREE</span></a>
      <a href="#" class="tab-btn active">Business Search</a>
    </nav>
  </header>

  <!-- Loading Overlay - Pong Game -->
  <div class="loading-overlay" id="loadingOverlay">
    <canvas id="pongCanvas"></canvas>
    
    <div class="pong-ui">
      <div class="pong-header">
        <div class="pong-query">Searching for <span id="loadingQueryName">...</span></div>
        <div class="pong-model" id="loadingModel">Gemini 3 Pro</div>
      </div>
      
      <div class="pong-status">
        <span id="loadingStatus">Initializing...</span>
        <div class="pong-progress">
          <div class="pong-progress-bar" id="loadingProgressBar"></div>
        </div>
      </div>
      
      <div class="pong-instructions">
        <span class="pong-key">W</span><span class="pong-key">S</span> or <span class="pong-key">Mouse</span> to play
      </div>
    </div>
    
    <div class="pong-score">
      <span id="pongPlayerScore">0</span>
      <span class="pong-divider">:</span>
      <span id="pongAiScore">0</span>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <!-- Search Section -->
    <section class="search-section" id="searchSection">
      <!-- Large Logo -->
      <div class="search-logo-large">
        <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <radialGradient id="heroGrad" cx="35%" cy="35%" r="60%">
              <stop offset="0%" stop-color="#fcd34d"/>
              <stop offset="50%" stop-color="#eab308"/>
              <stop offset="100%" stop-color="#ca8a04"/>
            </radialGradient>
            <linearGradient id="heroRingGrad" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#ffab40"/>
              <stop offset="50%" stop-color="#ff8c00"/>
              <stop offset="100%" stop-color="#ff6d00"/>
            </linearGradient>
            <filter id="heroGlow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="glow"/>
              <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="heroMoonGlow" x="-100%" y="-100%" width="300%" height="300%">
              <feGaussianBlur stdDeviation="1.5" result="glow"/>
              <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <style>
            .hero-moon {
              transform-origin: 32px 32px;
              animation: heroOrbit 3s linear infinite, heroMoonColor 2s ease-in-out infinite;
              filter: url(#heroMoonGlow);
            }
            @keyframes heroOrbit {
              0% { transform: rotate(-20deg) translate(26px, 0) scale(1); }
              50% { transform: rotate(-20deg) translate(-26px, 0) scale(0.5); }
              100% { transform: rotate(-20deg) translate(26px, 0) scale(1); }
            }
            @keyframes heroMoonColor {
              0%, 100% { fill: #3b82f6; }
              33% { fill: #a855f7; }
              66% { fill: #22c55e; }
            }
          </style>
          <ellipse cx="32" cy="32" rx="28" ry="8" stroke="url(#heroRingGrad)" stroke-width="2.5" fill="none" transform="rotate(-20 32 32)" stroke-dasharray="70 140" opacity="0.6"/>
          <circle class="hero-moon" cx="32" cy="32" r="4" fill="#3b82f6"/>
          <circle cx="32" cy="32" r="14" fill="#eab308" opacity="0.2" filter="url(#heroGlow)"/>
          <circle cx="32" cy="32" r="12" fill="url(#heroGrad)" filter="url(#heroGlow)"/>
          <ellipse cx="28" cy="28" rx="4" ry="3" fill="#fef3c7" opacity="0.4"/>
          <ellipse cx="32" cy="32" rx="28" ry="8" stroke="url(#heroRingGrad)" stroke-width="2.5" fill="none" transform="rotate(-20 32 32)" stroke-dasharray="70 140" stroke-dashoffset="-70"/>
        </svg>
      </div>

      <!-- Title -->
      <h1 class="search-title"><span class="accent">Search</span><span class="white">Ables</span><span class="muted">AI</span></h1>

      <!-- Search Box -->
      <div class="search-box">
        <div class="error-message" id="errorMessage"></div>
        
        <div class="search-input-container">
          <input type="search" id="entityName" placeholder="Company name..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-lpignore="true" data-form-type="other" data-1p-ignore="true" readonly>
          <div class="api-key-inline">
            <input type="text" id="apiKey" placeholder="API Key" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-lpignore="true" data-form-type="other" data-1p-ignore="true" readonly>
          </div>
          <button class="search-btn-round" id="searchBtn" onclick="analyzeEntity()">
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
              <ellipse cx="32" cy="32" rx="20" ry="6" stroke="currentColor" stroke-width="3" fill="none" transform="rotate(-20 32 32)"/>
              <circle cx="32" cy="32" r="8" fill="currentColor"/>
            </svg>
          </button>
        </div>

        <!-- Model Toggle -->
        <div class="model-toggle">
          <button class="model-btn" id="modelFlash" data-model="gemini-2.5-flash">
            Flash <span class="model-badge flash">2.5</span>
          </button>
          <button class="model-btn active" id="modelPro" data-model="gemini-3-pro-preview">
            Pro <span class="model-badge pro">3</span>
          </button>
        </div>
        
        <!-- Pong Game Button -->
        <button class="pong-trigger-inline" id="pongTrigger" title="Play Pong">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="6" width="4" height="12" rx="1"/>
            <circle cx="16" cy="12" r="2"/>
            <rect x="20" y="8" width="2" height="8" rx="0.5"/>
          </svg>
        </button>
      </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="resultsSection">
      <div class="prediction-card">
        <div class="prediction-header">
          <div class="state-badge">
            <div class="state-code" id="stateCode">--</div>
            <div>
              <div class="state-name" id="stateName">--</div>
              <div class="state-label">Primary Jurisdiction</div>
            </div>
            <button class="copy-btn copy-btn-header" data-copy-type="jurisdiction" title="Copy jurisdiction">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
            </button>
          </div>
          <div class="confidence-meter">
            <div class="confidence-value" id="confidenceValue">--%</div>
            <div class="confidence-label">Confidence</div>
            <button class="copy-btn copy-btn-header" data-copy-type="confidence" title="Copy confidence">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
            </button>
          </div>
        </div>

        <div class="entity-profile">
          <div class="profile-item">
            <div class="profile-label">Entity Type</div>
            <div class="profile-value-row">
              <div class="profile-value" id="entityType">--</div>
              <button class="copy-btn" data-target="entityType" title="Copy to clipboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Industry</div>
            <div class="profile-value-row">
              <div class="profile-value" id="industry">--</div>
              <button class="copy-btn" data-target="industry" title="Copy to clipboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="profile-item">
            <div class="profile-label">HQ Location</div>
            <div class="profile-value-row">
              <div class="profile-value" id="hqLocation">--</div>
              <button class="copy-btn" data-target="hqLocation" title="Copy to clipboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Formation Date</div>
            <div class="profile-value-row">
              <div class="profile-value" id="formationDate">--</div>
              <button class="copy-btn" data-target="formationDate" title="Copy to clipboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Status</div>
            <div class="profile-value-row">
              <div class="profile-value" id="regStatus">--</div>
              <button class="copy-btn" data-target="regStatus" title="Copy to clipboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
              </button>
            </div>
          </div>
          <div class="profile-item">
            <div class="profile-label">Registered Agent</div>
            <div class="profile-value-row">
              <div class="profile-value" id="regAgent">--</div>
              <button class="copy-btn" data-target="regAgent" title="Copy to clipboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
              </button>
            </div>
          </div>
        </div>

        <div class="owners-section" id="ownersSection" style="display: none;">
          <div class="owners-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            Owners / Officers / Members
            <button class="copy-btn copy-btn-owners" data-copy-type="owners" title="Copy all owners">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
            </button>
          </div>
          <div class="owners-list" id="ownersList"></div>
        </div>

        <div class="reasoning-box">
          <div class="reasoning-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 16v-4"></path>
              <path d="M12 8h.01"></path>
            </svg>
            Analysis
          </div>
          <div class="reasoning-text" id="reasoning">--</div>
        </div>

        <div class="routing-queue">
          <div class="queue-title">Priority Search Queue</div>
          <div class="queue-states" id="queueStates">--</div>
        </div>

        <div class="sources-section">
          <div class="sources-title">Data Quality</div>
          <span class="source-badge" id="sourceQuality">--</span>
        </div>

        <button class="copy-all-btn" id="copyAllBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
          Copy All Results
        </button>
      </div>
    </section>
  </div>

  <footer>
    <p>Powered by <a href="https://ables.ai">AblesAI</a>  Entity Intelligence Platform</p>
  </footer>

  <!-- Standalone Pong Overlay -->
  <div class="pong-overlay" id="pongOverlay">
    <canvas id="pongCanvasStandalone"></canvas>
    
    <div class="pong-ui-standalone">
      <div class="pong-title">PONG</div>
      <div class="pong-score-large">
        <span id="pongPlayerScoreStandalone">0</span>
        <span class="pong-vs">vs</span>
        <span id="pongAiScoreStandalone">0</span>
      </div>
      <div class="pong-labels">
        <span>YOU</span>
        <span>AI</span>
      </div>
    </div>
    
    <!-- Difficulty Selector -->
    <div class="pong-difficulty">
      <div class="difficulty-label">Difficulty</div>
      <button class="difficulty-btn easy" data-difficulty="easy">Easy</button>
      <button class="difficulty-btn pro active" data-difficulty="pro">Pro</button>
      <button class="difficulty-btn expert" data-difficulty="expert">Expert</button>
    </div>
    
    <div class="pong-controls">
      <div class="pong-instructions-standalone">
        <span class="pong-key">W</span><span class="pong-key">S</span> or <span class="pong-key">Mouse</span> to play
      </div>
      <div class="pong-game-info">First to <strong>5</strong> wins</div>
    </div>
    
    <div class="pong-leaderboard" id="pongLeaderboard">
      <div class="leaderboard-title">Leaderboard</div>
      <div class="leaderboard-list" id="leaderboardList"></div>
    </div>
    
    <button class="pong-close" id="pongClose">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
    
    <div class="pong-game-over" id="pongGameOver">
      <div class="game-over-text" id="gameOverText">You Win!</div>
      <div class="game-over-score" id="gameOverScore">5 - 3</div>
      <button class="play-again-btn" id="playAgainBtn">Play Again</button>
    </div>
  </div>

  <script>
    // ==================== PONG GAME ====================
    let pongCanvas, pongCtx;
    let pongAnimationId = null;
    let pongRunning = false;
    let standaloneMode = false;
    let standaloneCanvas, standaloneCtx;
    let currentDifficulty = 'pro';
    
    // Difficulty settings
    const difficultySettings = {
      easy: {
        ballSpeed: 8,
        ballSpeedMax: 18,
        ballAccel: 1.03,
        aiSpeed: 5,
        aiTracking: 0.08,
        paddleHeight: 90,
        spinFactor: 12
      },
      pro: {
        ballSpeed: 12,
        ballSpeedMax: 28,
        ballAccel: 1.08,
        aiSpeed: 9,
        aiTracking: 0.18,
        paddleHeight: 70,
        spinFactor: 18
      },
      expert: {
        ballSpeed: 16,
        ballSpeedMax: 35,
        ballAccel: 1.12,
        aiSpeed: 14,
        aiTracking: 0.25,
        paddleHeight: 55,
        spinFactor: 22
      }
    };
    
    // Game state
    const pong = {
      player: { y: 0, height: 70, width: 10, score: 0 },
      ai: { y: 0, height: 70, width: 10, score: 0, speed: 9 },
      ball: { x: 0, y: 0, vx: 12, vy: 7, radius: 8 },
      keys: { w: false, s: false },
      mouse: { y: null },
      paddleOffset: 40,
      winScore: 5
    };
    
    // Orbiting particles for pong
    const pongParticles = [
      { color: 'rgba(234, 179, 8, 0.6)', glow: 'rgba(234, 179, 8, 0.2)', size: 6, orbitRadius: 150, speed: 0.02, angle: 0 },
      { color: 'rgba(168, 85, 247, 0.6)', glow: 'rgba(168, 85, 247, 0.2)', size: 5, orbitRadius: 200, speed: -0.015, angle: Math.PI * 0.5 },
      { color: 'rgba(34, 197, 94, 0.6)', glow: 'rgba(34, 197, 94, 0.2)', size: 4, orbitRadius: 120, speed: 0.025, angle: Math.PI },
      { color: 'rgba(249, 115, 22, 0.6)', glow: 'rgba(249, 115, 22, 0.2)', size: 5, orbitRadius: 180, speed: -0.018, angle: Math.PI * 1.5 },
      { color: 'rgba(59, 130, 246, 0.6)', glow: 'rgba(59, 130, 246, 0.2)', size: 3, orbitRadius: 250, speed: 0.012, angle: Math.PI * 0.25 },
      { color: 'rgba(236, 72, 153, 0.6)', glow: 'rgba(236, 72, 153, 0.2)', size: 4, orbitRadius: 220, speed: -0.02, angle: Math.PI * 1.25 }
    ];
    
    function applyDifficulty(difficulty) {
      const settings = difficultySettings[difficulty];
      if (!settings) return;
      
      currentDifficulty = difficulty;
      pong.player.height = settings.paddleHeight;
      pong.ai.height = settings.paddleHeight;
      pong.ai.speed = settings.aiSpeed;
      
      // Update active button
      document.querySelectorAll('.difficulty-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.difficulty === difficulty);
      });
      
      // Save preference
      localStorage.setItem('pong_difficulty', difficulty);
    }
    
    // Leaderboard
    function getLeaderboard() {
      const stored = localStorage.getItem('pong_leaderboard');
      return stored ? JSON.parse(stored) : [];
    }
    
    function saveToLeaderboard(playerScore, aiScore) {
      if (playerScore <= aiScore) return; // Only save wins
      const leaderboard = getLeaderboard();
      const entry = {
        score: `${playerScore}-${aiScore}`,
        margin: playerScore - aiScore,
        difficulty: currentDifficulty,
        date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
      };
      leaderboard.push(entry);
      // Sort by difficulty weight then margin
      const diffWeight = { expert: 3, pro: 2, easy: 1 };
      leaderboard.sort((a, b) => {
        const weightA = diffWeight[a.difficulty] || 1;
        const weightB = diffWeight[b.difficulty] || 1;
        if (weightA !== weightB) return weightB - weightA;
        return b.margin - a.margin;
      });
      localStorage.setItem('pong_leaderboard', JSON.stringify(leaderboard.slice(0, 10)));
    }
    
    function renderLeaderboard() {
      const list = document.getElementById('leaderboardList');
      if (!list) return;
      const leaderboard = getLeaderboard();
      
      if (leaderboard.length === 0) {
        list.innerHTML = '<div class="leaderboard-empty">No wins yet. Be the first!</div>';
        return;
      }
      
      const diffColors = { easy: '#22c55e', pro: '#eab308', expert: '#ef4444' };
      list.innerHTML = leaderboard.slice(0, 5).map((entry, i) => {
        const rankClass = i === 0 ? 'gold' : i === 1 ? 'silver' : i === 2 ? 'bronze' : '';
        const diffColor = diffColors[entry.difficulty] || '#888';
        const diffLabel = entry.difficulty ? entry.difficulty.charAt(0).toUpperCase() : '';
        return `
          <div class="leaderboard-item">
            <div class="leaderboard-rank ${rankClass}">${i + 1}</div>
            <div class="leaderboard-score">${entry.score}</div>
            <span style="color:${diffColor};font-size:0.6rem;font-weight:700;">${diffLabel}</span>
            <div class="leaderboard-date">${entry.date}</div>
          </div>
        `;
      }).join('');
    }
    
    function initPong(canvas) {
      pongCanvas = canvas || document.getElementById('pongCanvas');
      if (!pongCanvas) return;
      pongCtx = pongCanvas.getContext('2d');
      resizePong();
      
      // Keyboard controls
      document.addEventListener('keydown', (e) => {
        if (e.key === 'w' || e.key === 'W') pong.keys.w = true;
        if (e.key === 's' || e.key === 'S') pong.keys.s = true;
        if (e.key === 'ArrowUp') pong.keys.w = true;
        if (e.key === 'ArrowDown') pong.keys.s = true;
      });
      
      document.addEventListener('keyup', (e) => {
        if (e.key === 'w' || e.key === 'W') pong.keys.w = false;
        if (e.key === 's' || e.key === 'S') pong.keys.s = false;
        if (e.key === 'ArrowUp') pong.keys.w = false;
        if (e.key === 'ArrowDown') pong.keys.s = false;
      });
      
      // Mouse/touch controls for loading canvas
      const loadingCanvas = document.getElementById('pongCanvas');
      if (loadingCanvas) {
        loadingCanvas.addEventListener('mousemove', (e) => {
          if (!standaloneMode) pong.mouse.y = e.clientY;
        });
        loadingCanvas.addEventListener('touchmove', (e) => {
          e.preventDefault();
          if (!standaloneMode) pong.mouse.y = e.touches[0].clientY;
        }, { passive: false });
      }
      
      // Mouse/touch controls for standalone canvas
      const standaloneCanvasEl = document.getElementById('pongCanvasStandalone');
      if (standaloneCanvasEl) {
        standaloneCanvasEl.addEventListener('mousemove', (e) => {
          if (standaloneMode) pong.mouse.y = e.clientY;
        });
        standaloneCanvasEl.addEventListener('touchmove', (e) => {
          e.preventDefault();
          if (standaloneMode) pong.mouse.y = e.touches[0].clientY;
        }, { passive: false });
      }
      
      window.addEventListener('resize', resizePong);
    }
    
    function resizePong() {
      if (!pongCanvas) return;
      pongCanvas.width = window.innerWidth;
      pongCanvas.height = window.innerHeight;
      resetBall();
      pong.player.y = pongCanvas.height / 2 - pong.player.height / 2;
      pong.ai.y = pongCanvas.height / 2 - pong.ai.height / 2;
    }
    
    function resetBall() {
      const settings = difficultySettings[currentDifficulty];
      pong.ball.x = pongCanvas.width / 2;
      pong.ball.y = pongCanvas.height / 2;
      pong.ball.vx = (Math.random() > 0.5 ? 1 : -1) * settings.ballSpeed;
      pong.ball.vy = (Math.random() - 0.5) * (settings.ballSpeed * 1.2);
    }
    
    function updatePong() {
      if (!pongRunning) return;
      
      const settings = difficultySettings[currentDifficulty];
      const w = pongCanvas.width;
      const h = pongCanvas.height;
      const paddleSpeed = 12;
      
      // Update orbiting particles
      pongParticles.forEach(p => {
        p.angle += p.speed;
      });
      
      // Player movement
      if (pong.mouse.y !== null) {
        const targetY = pong.mouse.y - pong.player.height / 2;
        pong.player.y += (targetY - pong.player.y) * 0.2;
      } else {
        if (pong.keys.w) pong.player.y -= paddleSpeed;
        if (pong.keys.s) pong.player.y += paddleSpeed;
      }
      
      // Clamp player paddle
      pong.player.y = Math.max(0, Math.min(h - pong.player.height, pong.player.y));
      
      // AI movement - smarter prediction based on difficulty
      const aiCenter = pong.ai.y + pong.ai.height / 2;
      let targetY = pong.ball.y;
      
      // Predict where ball will be
      if (pong.ball.vx > 0) {
        const timeToReach = (w - pong.paddleOffset - pong.ai.width - pong.ball.x) / pong.ball.vx;
        targetY = pong.ball.y + pong.ball.vy * timeToReach * 0.7;
      }
      
      const diff = targetY - aiCenter;
      if (Math.abs(diff) > 8) {
        pong.ai.y += Math.sign(diff) * Math.min(pong.ai.speed, Math.abs(diff) * settings.aiTracking);
      }
      pong.ai.y = Math.max(0, Math.min(h - pong.ai.height, pong.ai.y));
      
      // Ball movement
      pong.ball.x += pong.ball.vx;
      pong.ball.y += pong.ball.vy;
      
      // Top/bottom collision
      if (pong.ball.y - pong.ball.radius <= 0 || pong.ball.y + pong.ball.radius >= h) {
        pong.ball.vy *= -1;
        pong.ball.y = Math.max(pong.ball.radius, Math.min(h - pong.ball.radius, pong.ball.y));
      }
      
      // Player paddle collision (left side)
      if (pong.ball.x - pong.ball.radius <= pong.paddleOffset + pong.player.width &&
          pong.ball.y >= pong.player.y && pong.ball.y <= pong.player.y + pong.player.height &&
          pong.ball.vx < 0) {
        pong.ball.vx *= -settings.ballAccel;
        pong.ball.x = pong.paddleOffset + pong.player.width + pong.ball.radius;
        const hitPos = (pong.ball.y - pong.player.y) / pong.player.height;
        pong.ball.vy = (hitPos - 0.5) * settings.spinFactor;
      }
      
      // AI paddle collision (right side)
      if (pong.ball.x + pong.ball.radius >= w - pong.paddleOffset - pong.ai.width &&
          pong.ball.y >= pong.ai.y && pong.ball.y <= pong.ai.y + pong.ai.height &&
          pong.ball.vx > 0) {
        pong.ball.vx *= -settings.ballAccel;
        pong.ball.x = w - pong.paddleOffset - pong.ai.width - pong.ball.radius;
        const hitPos = (pong.ball.y - pong.ai.y) / pong.ai.height;
        pong.ball.vy = (hitPos - 0.5) * settings.spinFactor;
      }
      
      // Limit ball speed
      const maxSpeed = settings.ballSpeedMax;
      pong.ball.vx = Math.sign(pong.ball.vx) * Math.min(Math.abs(pong.ball.vx), maxSpeed);
      pong.ball.vy = Math.sign(pong.ball.vy) * Math.min(Math.abs(pong.ball.vy), maxSpeed);
      
      // Score
      if (pong.ball.x < 0) {
        pong.ai.score++;
        updatePongScore();
        checkGameOver();
        if (pongRunning) resetBall();
      } else if (pong.ball.x > w) {
        pong.player.score++;
        updatePongScore();
        checkGameOver();
        if (pongRunning) resetBall();
      }
    }
    
    function checkGameOver() {
      if (!standaloneMode) return;
      
      if (pong.player.score >= pong.winScore || pong.ai.score >= pong.winScore) {
        pongRunning = false;
        const playerWon = pong.player.score >= pong.winScore;
        
        // Save to leaderboard if player won
        if (playerWon) {
          saveToLeaderboard(pong.player.score, pong.ai.score);
          renderLeaderboard();
        }
        
        // Show game over
        const gameOver = document.getElementById('pongGameOver');
        const gameOverText = document.getElementById('gameOverText');
        const gameOverScore = document.getElementById('gameOverScore');
        
        gameOverText.textContent = playerWon ? 'You Win!' : 'You Lose!';
        gameOverText.className = 'game-over-text ' + (playerWon ? 'win' : 'lose');
        gameOverScore.textContent = `${pong.player.score} - ${pong.ai.score}`;
        gameOver.classList.add('active');
      }
    }
    
    function updatePongScore() {
      // Loading screen score
      const playerScore = document.getElementById('pongPlayerScore');
      const aiScore = document.getElementById('pongAiScore');
      if (playerScore) playerScore.textContent = pong.player.score;
      if (aiScore) aiScore.textContent = pong.ai.score;
      
      // Standalone score
      const playerScoreStandalone = document.getElementById('pongPlayerScoreStandalone');
      const aiScoreStandalone = document.getElementById('pongAiScoreStandalone');
      if (playerScoreStandalone) playerScoreStandalone.textContent = pong.player.score;
      if (aiScoreStandalone) aiScoreStandalone.textContent = pong.ai.score;
    }
    
    function roundRect(ctx, x, y, w, h, r) {
      ctx.beginPath();
      ctx.moveTo(x + r, y);
      ctx.lineTo(x + w - r, y);
      ctx.quadraticCurveTo(x + w, y, x + w, y + r);
      ctx.lineTo(x + w, y + h - r);
      ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
      ctx.lineTo(x + r, y + h);
      ctx.quadraticCurveTo(x, y + h, x, y + h - r);
      ctx.lineTo(x, y + r);
      ctx.quadraticCurveTo(x, y, x + r, y);
      ctx.closePath();
      ctx.fill();
    }
    
    function drawPong() {
      if (!pongCtx || !pongRunning) return;
      
      const w = pongCanvas.width;
      const h = pongCanvas.height;
      const isDark = document.documentElement.getAttribute('data-theme') !== 'light';
      
      // Clear
      pongCtx.fillStyle = isDark ? '#0a0a0f' : '#f5f5f5';
      pongCtx.fillRect(0, 0, w, h);
      
      // Draw orbiting particles (background layer)
      const centerX = w / 2;
      const centerY = h / 2;
      
      pongParticles.forEach(p => {
        const x = centerX + Math.cos(p.angle) * p.orbitRadius;
        const y = centerY + Math.sin(p.angle) * p.orbitRadius;
        
        // Glow
        pongCtx.shadowColor = p.glow;
        pongCtx.shadowBlur = 8;
        pongCtx.fillStyle = p.color;
        pongCtx.beginPath();
        pongCtx.arc(x, y, p.size, 0, Math.PI * 2);
        pongCtx.fill();
      });
      
      pongCtx.shadowBlur = 0;
      
      // Center line
      pongCtx.setLineDash([20, 15]);
      pongCtx.strokeStyle = isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)';
      pongCtx.lineWidth = 4;
      pongCtx.beginPath();
      pongCtx.moveTo(w / 2, 0);
      pongCtx.lineTo(w / 2, h);
      pongCtx.stroke();
      pongCtx.setLineDash([]);
      
      // Paddles
      const paddleColor = '#eab308';
      const paddleRadius = 6;
      
      // Player paddle (left) with glow and rounded corners
      pongCtx.shadowColor = paddleColor;
      pongCtx.shadowBlur = 20;
      pongCtx.fillStyle = paddleColor;
      roundRect(pongCtx, pong.paddleOffset, pong.player.y, pong.player.width, pong.player.height, paddleRadius);
      
      // AI paddle (right)
      pongCtx.shadowColor = isDark ? '#a855f7' : '#8b5cf6';
      pongCtx.fillStyle = isDark ? '#a855f7' : '#8b5cf6';
      roundRect(pongCtx, w - pong.paddleOffset - pong.ai.width, pong.ai.y, pong.ai.width, pong.ai.height, paddleRadius);
      
      // Ball with glow
      pongCtx.shadowColor = paddleColor;
      pongCtx.shadowBlur = 25;
      pongCtx.fillStyle = '#fff';
      pongCtx.beginPath();
      pongCtx.arc(pong.ball.x, pong.ball.y, pong.ball.radius, 0, Math.PI * 2);
      pongCtx.fill();
      
      // Reset shadow
      pongCtx.shadowBlur = 0;
    }
    
    function pongLoop() {
      updatePong();
      drawPong();
      if (pongRunning) {
        pongAnimationId = requestAnimationFrame(pongLoop);
      }
    }
    
    function startPong() {
      if (!pongCanvas) initPong();
      pong.player.score = 0;
      pong.ai.score = 0;
      updatePongScore();
      resizePong();
      pongRunning = true;
      pongLoop();
    }
    
    function stopPong() {
      pongRunning = false;
      if (pongAnimationId) {
        cancelAnimationFrame(pongAnimationId);
        pongAnimationId = null;
      }
    }
    
    // Standalone Pong Mode
    function openStandalonePong() {
      standaloneMode = true;
      const overlay = document.getElementById('pongOverlay');
      const canvas = document.getElementById('pongCanvasStandalone');
      
      pongCanvas = canvas;
      pongCtx = canvas.getContext('2d');
      
      overlay.classList.add('active');
      
      // Load saved difficulty or default to pro
      const savedDifficulty = localStorage.getItem('pong_difficulty') || 'pro';
      applyDifficulty(savedDifficulty);
      
      // Reset game
      pong.player.score = 0;
      pong.ai.score = 0;
      pong.mouse.y = null;
      document.getElementById('pongGameOver').classList.remove('active');
      
      resizePong();
      updatePongScore();
      renderLeaderboard();
      
      pongRunning = true;
      pongLoop();
    }
    
    function closeStandalonePong() {
      standaloneMode = false;
      pongRunning = false;
      
      const overlay = document.getElementById('pongOverlay');
      overlay.classList.remove('active');
      
      // Switch back to loading canvas if it exists
      const loadingCanvas = document.getElementById('pongCanvas');
      if (loadingCanvas) {
        pongCanvas = loadingCanvas;
        pongCtx = loadingCanvas.getContext('2d');
      }
    }
    
    function resetStandaloneGame() {
      // Reapply current difficulty settings
      applyDifficulty(currentDifficulty);
      
      pong.player.score = 0;
      pong.ai.score = 0;
      pong.mouse.y = null;
      document.getElementById('pongGameOver').classList.remove('active');
      updatePongScore();
      resizePong();
      pongRunning = true;
      pongLoop();
    }
    
    // Init pong on load
    document.addEventListener('DOMContentLoaded', () => {
      // Prevent browser autofill by making inputs readonly briefly
      const entityInput = document.getElementById('entityName');
      const apiInput = document.getElementById('apiKey');
      
      // Remove readonly after a short delay to bypass autofill
      setTimeout(() => {
        if (entityInput) entityInput.removeAttribute('readonly');
        if (apiInput) apiInput.removeAttribute('readonly');
      }, 150);
      
      initPong();
      
      // Standalone pong triggers
      const pongTrigger = document.getElementById('pongTrigger');
      const pongClose = document.getElementById('pongClose');
      const playAgainBtn = document.getElementById('playAgainBtn');
      
      if (pongTrigger) pongTrigger.addEventListener('click', openStandalonePong);
      if (pongClose) pongClose.addEventListener('click', closeStandalonePong);
      if (playAgainBtn) playAgainBtn.addEventListener('click', resetStandaloneGame);
      
      // Difficulty buttons
      document.querySelectorAll('.difficulty-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          applyDifficulty(btn.dataset.difficulty);
          resetStandaloneGame();
        });
      });
      
      // ESC to close
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && standaloneMode) {
          closeStandalonePong();
        }
      });
    });

    // ==================== LOADING ANIMATION ====================
    let loadingInterval = null;
    let selectedModel = 'gemini-3-pro-preview';
    
    const statusMessages = [
      "Searching Web...",
      "Gathering Intel...",
      "Cross-Referencing...",
      "Analyzing Data...",
      "Identifying Patterns...",
      "Verifying Sources...",
      "Building Profile...",
      "Calculating Confidence...",
      "Finalizing Results..."
    ];
    let statusIndex = 0;

    function startLoadingAnimation(entityName) {
      const overlay = document.getElementById('loadingOverlay');
      overlay.classList.add('active');
      
      // Set query name
      document.getElementById('loadingQueryName').textContent = entityName;
      
      // Set model name
      const isFlash = selectedModel.includes('flash');
      const modelName = isFlash ? 'Gemini 2.5 Flash' : 'Gemini 3 Pro';
      document.getElementById('loadingModel').textContent = modelName;
      
      // Reset progress
      document.getElementById('loadingProgressBar').style.width = '0%';
      statusIndex = 0;
      
      // Start Pong
      startPong();
      
      // Rotate status messages
      loadingInterval = setInterval(() => {
        statusIndex = (statusIndex + 1) % statusMessages.length;
        document.getElementById('loadingStatus').textContent = statusMessages[statusIndex];
      }, 2500);
    }

    function updateLoadingStep(step, progress) {
      document.getElementById('loadingProgressBar').style.width = progress + '%';
    }

    function stopLoadingAnimation() {
      clearInterval(loadingInterval);
      stopPong();
      document.getElementById('loadingOverlay').classList.remove('active');
    }

    // ==================== MODEL SELECTION ====================
    // Load saved model preference
    const savedModel = localStorage.getItem('ai_business_search_model');
    if (savedModel) {
      selectedModel = savedModel;
      if (savedModel.includes('flash')) {
        document.getElementById('modelFlash').classList.add('active');
        document.getElementById('modelPro').classList.remove('active');
      } else {
        document.getElementById('modelPro').classList.add('active');
        document.getElementById('modelFlash').classList.remove('active');
      }
    }

    document.getElementById('modelFlash').addEventListener('click', function() {
      selectedModel = this.dataset.model;
      localStorage.setItem('ai_business_search_model', selectedModel);
      document.getElementById('modelFlash').classList.add('active');
      document.getElementById('modelPro').classList.remove('active');
    });

    document.getElementById('modelPro').addEventListener('click', function() {
      selectedModel = this.dataset.model;
      localStorage.setItem('ai_business_search_model', selectedModel);
      document.getElementById('modelPro').classList.add('active');
      document.getElementById('modelFlash').classList.remove('active');
    });

    // ==================== API KEY MANAGEMENT ====================
    function updateApiStatus() {
      const savedKey = localStorage.getItem('gemini_api_key_ai_business_search');
      if (savedKey) {
        document.getElementById('apiKey').value = savedKey;
      }
    }

    // ==================== MAIN SEARCH FUNCTION ====================
    async function analyzeEntity() {
      const apiKey = document.getElementById('apiKey').value.trim();
      const entityName = document.getElementById('entityName').value.trim();
      const errorEl = document.getElementById('errorMessage');
      
      errorEl.classList.remove('active');
      
      if (!apiKey) {
        errorEl.textContent = 'Please enter your Gemini API key';
        errorEl.classList.add('active');
        return;
      }
      
      if (!entityName) {
        errorEl.textContent = 'Please enter a business name to search';
        errorEl.classList.add('active');
        return;
      }
      
      // Start loading
      startLoadingAnimation(entityName);
      document.getElementById('searchSection').classList.add('has-results');
      
      try {
        // Step 1: Grounding search
        updateLoadingStep(1, 15);
        document.getElementById('loadingStatus').textContent = 'Searching Web...';
        
        const groundingPrompt = `Search for comprehensive information about "${entityName}".
Find: 
- State of incorporation
- Entity type (LLC, Inc, Corp, LP)
- Headquarters location
- Industry
- Business formation/start date (when the entity was registered/incorporated)
- Current registration status (Active, Inactive, Dissolved, Good Standing, etc.)
- Owners, members, officers, or registered agent if available
- Any official registry information

Look for SEC filings, state corporation databases, OpenCorporates, company websites, LinkedIn, and news articles.`;

        const groundingResponse = await callGeminiWithGrounding(apiKey, groundingPrompt);
        
        // Step 2: Analysis
        updateLoadingStep(2, 50);
        document.getElementById('loadingStatus').textContent = 'Analyzing Data...';
        
        const routingPrompt = `Based on this research about "${entityName}":

${groundingResponse.text}

TASK: Extract business entity information and predict the U.S. state of incorporation with confidence score (0-100).

CONFIDENCE SCORING:
- 90-100: Verified in official state registry or SEC filings
- 70-89: Found on OpenCorporates or official company documents
- 50-69: Inferred from HQ location, industry patterns, web presence
- 30-49: Educated guess based on heuristics only
- 0-29: Very low confidence, minimal information found

HEURISTICS FOR EDUCATED GUESSES:
- Delaware: VC-backed, public companies, tech startups, "Inc." suffix
- Home State: Local businesses typically incorporate where HQ is
- Wyoming/Nevada: Privacy-focused, crypto, anonymous LLCs
- Texas: Recent DExit trend for some companies

JSON RESPONSE:
{
    "predicted_state": "XX",
    "state_name": "Full State Name",
    "confidence": 0-100,
    "source_quality": "registry/opencorporates/sec/web/heuristic",
    "entity_type": "C-Corp/LLC/LP/Unknown",
    "industry": "Industry",
    "hq_location": "City, State",
    "formation_date": "YYYY-MM-DD or Month YYYY or Year only if exact date unknown, or Unknown",
    "registration_status": "Active/Inactive/Dissolved/Good Standing/Unknown",
    "owners_members": ["Name 1 (Title)", "Name 2 (Title)"] or ["Unknown"] if not found,
    "registered_agent": "Agent Name and Address if found, or Unknown",
    "reasoning": "Explain what was found and why this state was predicted...",
    "routing_queue": ["XX", "YY", "ZZ"]
}

Always make a prediction. Use heuristics if no direct information found. Set confidence accordingly. For owners/members, include any officers, directors, members, or principals found.`;

        // Step 3: Prediction
        updateLoadingStep(3, 85);
        document.getElementById('loadingStatus').textContent = 'Generating Report...';
        
        const routingResponse = await callGemini(apiKey, routingPrompt);
        
        // Complete
        updateLoadingStep(3, 100);
        
        // Parse and display
        const prediction = parseJsonResponse(routingResponse.text);
        displayResults(prediction, groundingResponse.sources);
        
        setTimeout(() => {
          stopLoadingAnimation();
        }, 500);
        
      } catch (error) {
        stopLoadingAnimation();
        errorEl.textContent = 'Error: ' + error.message;
        errorEl.classList.add('active');
      }
    }

    async function callGeminiWithGrounding(apiKey, prompt) {
      const url = `https://generativelanguage.googleapis.com/v1beta/models/${selectedModel}:generateContent?key=${apiKey}`;
      
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          tools: [{ google_search: {} }]
        })
      });
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error?.message || 'API request failed');
      }
      
      const data = await response.json();
      const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';
      const sources = data.candidates?.[0]?.groundingMetadata?.groundingChunks || [];
      
      return { text, sources };
    }

    async function callGemini(apiKey, prompt) {
      const url = `https://generativelanguage.googleapis.com/v1beta/models/${selectedModel}:generateContent?key=${apiKey}`;
      
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          generationConfig: {
            temperature: 0.2,
            topP: 0.8,
            maxOutputTokens: 2048
          }
        })
      });
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error?.message || 'API request failed');
      }
      
      const data = await response.json();
      const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';
      
      return { text };
    }

    function parseJsonResponse(text) {
      try {
        const jsonMatch = text.match(/\{[\s\S]*\}/);
        if (jsonMatch) {
          return JSON.parse(jsonMatch[0]);
        }
      } catch (e) {
        console.error('JSON parse error:', e);
      }
      return {
        predicted_state: "??",
        state_name: "Unknown",
        confidence: 0,
        reasoning: text,
        routing_queue: []
      };
    }

    function displayResults(prediction, sources) {
      document.getElementById('resultsSection').classList.add('active');
      
      document.getElementById('stateCode').textContent = prediction.predicted_state || '--';
      document.getElementById('stateName').textContent = prediction.state_name || 'Unknown';
      
      const confidence = prediction.confidence || 0;
      const confEl = document.getElementById('confidenceValue');
      confEl.textContent = confidence + '%';
      confEl.style.color = confidence >= 70 ? 'var(--tier-a)' : confidence >= 50 ? 'var(--tier-c)' : 'var(--tier-e)';
      
      document.getElementById('entityType').textContent = prediction.entity_type || 'Unknown';
      document.getElementById('industry').textContent = prediction.industry || 'Unknown';
      document.getElementById('hqLocation').textContent = prediction.hq_location || 'Unknown';
      document.getElementById('formationDate').textContent = prediction.formation_date || 'Unknown';
      
      const statusEl = document.getElementById('regStatus');
      const status = prediction.registration_status || 'Unknown';
      statusEl.textContent = status;
      statusEl.className = 'profile-value';
      if (status.toLowerCase().includes('active') || status.toLowerCase().includes('good')) {
        statusEl.classList.add('status-active');
      } else if (status.toLowerCase().includes('inactive') || status.toLowerCase().includes('dissolved')) {
        statusEl.classList.add('status-inactive');
      }
      
      document.getElementById('regAgent').textContent = prediction.registered_agent || 'Unknown';
      
      // Owners section
      const ownersSection = document.getElementById('ownersSection');
      const ownersList = document.getElementById('ownersList');
      const owners = prediction.owners_members || [];
      
      if (owners.length > 0 && owners[0] !== 'Unknown' && owners[0] !== '') {
        ownersSection.style.display = 'block';
        ownersList.innerHTML = owners.map(owner => {
          const match = owner.match(/^(.+?)\s*\((.+)\)$/);
          if (match) {
            return `<span class="owner-tag">${match[1]}<span class="owner-title">(${match[2]})</span></span>`;
          }
          return `<span class="owner-tag">${owner}</span>`;
        }).join('');
      } else {
        ownersSection.style.display = 'none';
      }
      
      document.getElementById('reasoning').textContent = prediction.reasoning || 'No analysis available';
      
      const queue = prediction.routing_queue || [];
      document.getElementById('queueStates').innerHTML = queue.map((state, i) => 
        `<span class="queue-state">${state}<span class="priority">#${i+1}</span></span>`
      ).join('');
      
      document.getElementById('sourceQuality').textContent = prediction.source_quality || 'web';
      
      // Scroll to results
      document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // ==================== EVENT LISTENERS ====================
    document.getElementById('apiKey').addEventListener('input', function() {
      const key = this.value.trim();
      if (key) {
        localStorage.setItem('gemini_api_key_ai_business_search', key);
      }
      updateApiStatus();
    });

    document.getElementById('entityName').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') analyzeEntity();
    });

    document.getElementById('apiKey').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') analyzeEntity();
    });

    document.getElementById('themeToggle').addEventListener('click', function() {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    // ==================== COPY TO CLIPBOARD ====================
    const copyIconSvg = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>';
    const checkIconSvg = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>';

    function copyToClipboard(text, btn) {
      navigator.clipboard.writeText(text).then(() => {
        btn.classList.add('copied');
        if (btn.id === 'copyAllBtn') {
          btn.innerHTML = checkIconSvg + ' Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = copyIconSvg + ' Copy All Results';
          }, 1500);
        } else {
          btn.innerHTML = checkIconSvg;
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = copyIconSvg;
          }, 1500);
        }
      });
    }

    // Copy All Results button
    document.getElementById('copyAllBtn').addEventListener('click', function() {
      const stateCode = document.getElementById('stateCode').textContent;
      const stateName = document.getElementById('stateName').textContent;
      const confidence = document.getElementById('confidenceValue').textContent;
      const entityType = document.getElementById('entityType').textContent;
      const industry = document.getElementById('industry').textContent;
      const hqLocation = document.getElementById('hqLocation').textContent;
      const formationDate = document.getElementById('formationDate').textContent;
      const regStatus = document.getElementById('regStatus').textContent;
      const regAgent = document.getElementById('regAgent').textContent;
      
      const ownerBadges = document.querySelectorAll('#ownersList .owner-badge');
      const owners = ownerBadges.length > 0 
        ? Array.from(ownerBadges).map(badge => badge.textContent.trim()).join(', ')
        : 'Unknown';
      
      const allResults = `Primary Jurisdiction: ${stateName} (${stateCode})
Confidence: ${confidence}
Entity Type: ${entityType}
Industry: ${industry}
HQ Location: ${hqLocation}
Formation Date: ${formationDate}
Status: ${regStatus}
Registered Agent: ${regAgent}
Owners/Officers/Members: ${owners}`;
      
      copyToClipboard(allResults, this);
    });

    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const copyType = this.dataset.copyType;
        
        if (copyType === 'jurisdiction') {
          const stateCode = document.getElementById('stateCode').textContent;
          const stateName = document.getElementById('stateName').textContent;
          copyToClipboard(`Primary Jurisdiction: ${stateName} (${stateCode})`, this);
        } else if (copyType === 'confidence') {
          const confidence = document.getElementById('confidenceValue').textContent;
          copyToClipboard(`Confidence: ${confidence}`, this);
        } else if (copyType === 'owners') {
          const ownerBadges = document.querySelectorAll('#ownersList .owner-badge');
          const owners = Array.from(ownerBadges).map(badge => badge.textContent.trim()).join(', ');
          copyToClipboard(`Owners/Officers/Members: ${owners}`, this);
        } else {
          const targetId = this.dataset.target;
          const targetEl = document.getElementById(targetId);
          if (targetEl) {
            const label = targetEl.closest('.profile-item').querySelector('.profile-label').textContent;
            const value = targetEl.textContent;
            copyToClipboard(`${label}: ${value}`, this);
          }
        }
      });
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateApiStatus();
    });
  </script>
</body>
</html>
