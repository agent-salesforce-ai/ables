<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Business Intelligence | AblesAI</title>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NLL9GDQY8S"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-NLL9GDQY8S');
  </script>
  <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="f4131404-42af-4d2e-9472-473077a790bb" type="text/javascript" async></script>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg viewBox='0 0 64 64' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3CradialGradient id='pg' cx='35%25' cy='35%25' r='60%25'%3E%3Cstop offset='0%25' stop-color='%23fcd34d'/%3E%3Cstop offset='50%25' stop-color='%23eab308'/%3E%3Cstop offset='100%25' stop-color='%23ca8a04'/%3E%3C/radialGradient%3E%3ClinearGradient id='rg' x1='0%25' y1='0%25' x2='100%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%23f97316'/%3E%3Cstop offset='100%25' stop-color='%23dc2626'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cellipse cx='32' cy='32' rx='28' ry='8' stroke='url(%23rg)' stroke-width='2.5' fill='none' transform='rotate(-20 32 32)' stroke-dasharray='70 140' opacity='0.6'/%3E%3Ccircle cx='32' cy='32' r='12' fill='url(%23pg)'/%3E%3Cellipse cx='28' cy='28' rx='4' ry='3' fill='%23fef3c7' opacity='0.4'/%3E%3Cellipse cx='32' cy='32' rx='28' ry='8' stroke='url(%23rg)' stroke-width='2.5' fill='none' transform='rotate(-20 32 32)' stroke-dasharray='70 140' stroke-dashoffset='-70'/%3E%3Ccircle cx='58' cy='28' r='4' fill='%23a855f7'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0a0a;
      --bg-secondary: #111111;
      --bg-tertiary: #1a1a1a;
      --bg-card: #111111;
      --text-primary: #f5f5f5;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --accent: #eab308;
      --accent-light: #facc15;
      --tier-a: #22c55e;
      --tier-b: #84cc16;
      --tier-c: #eab308;
      --tier-d: #f97316;
      --tier-e: #ef4444;
      --accent-blue: #3b82f6;
      --accent-purple: #a855f7;
      --border-primary: #27272a;
      --border-secondary: #1f1f22;
      --glow-gold: rgba(234, 179, 8, 0.15);
    }

    [data-theme="light"] {
      --bg-primary: #f8f9fa;
      --bg-secondary: #ffffff;
      --bg-tertiary: #e9ecef;
      --bg-card: #ffffff;
      --text-primary: #1a1a2e;
      --text-secondary: #374151;
      --text-muted: #5a5a6e;
      --border-primary: #d1d5db;
      --border-secondary: #e5e7eb;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'DM Sans', system-ui, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      padding-top: 65px;
    }

    .bg-grid {
      position: fixed;
      inset: 0;
      background-image: 
        linear-gradient(rgba(234, 179, 8, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(234, 179, 8, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    .bg-gradient {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      height: 600px;
      background: radial-gradient(ellipse 80% 50% at 50% 0%, var(--glow-gold), transparent);
      pointer-events: none;
      z-index: 0;
    }

    /* Header */
    .main-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 65px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-secondary);
      z-index: 100;
    }

    .header-logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .header-logo svg {
      width: 36px;
      height: 36px;
    }

    .header-logo h1 {
      font-size: 1.1rem;
      font-weight: 800;
      letter-spacing: -0.5px;
    }

    .header-logo h1 span { color: var(--text-muted); font-weight: 500; }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .api-input-wrap {
      display: flex;
      align-items: center;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 8px;
      padding: 0 12px;
      gap: 8px;
      height: 38px;
    }

    .api-input-wrap svg { width: 14px; height: 14px; color: var(--text-muted); flex-shrink: 0; }

    .api-input-wrap input {
      width: 140px;
      background: transparent;
      border: none;
      color: var(--text-primary);
      font-size: 0.8rem;
      font-family: inherit;
      -webkit-text-security: disc;
    }

    .api-input-wrap input:focus { outline: none; }

    .theme-toggle {
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 8px;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .theme-toggle:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .theme-toggle svg { width: 18px; height: 18px; }

    /* Main Content */
    .main-content {
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
    }

    /* Search Section */
    .search-section {
      text-align: center;
      padding: 3rem 0 2rem;
      transition: padding 0.4s ease;
    }

    .search-section.has-results {
      padding: 1.5rem 0 1rem;
    }

    .search-logo {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
    }

    .search-title {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, var(--text-primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .search-subtitle {
      color: var(--text-muted);
      font-size: 1rem;
      margin-bottom: 2rem;
    }

    .search-input-container {
      display: flex;
      align-items: center;
      background: var(--bg-card);
      border: 1px solid var(--border-primary);
      border-radius: 50px;
      padding: 6px 6px 6px 20px;
      max-width: 700px;
      margin: 0 auto;
      gap: 12px;
      transition: all 0.3s;
    }

    .search-input-container:focus-within {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(234, 179, 8, 0.1);
    }

    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      font-size: 1rem;
      color: var(--text-primary);
      font-family: inherit;
    }

    .search-input:focus { outline: none; }
    .search-input::placeholder { color: var(--text-muted); }

    .search-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: linear-gradient(135deg, var(--accent), #d97706);
      border: none;
      border-radius: 50px;
      color: #000;
      font-size: 0.9rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }

    .search-btn:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 20px rgba(234, 179, 8, 0.4);
    }

    .search-btn svg { width: 18px; height: 18px; }

    /* Model Selector */
    .model-selector {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 1rem;
    }

    .model-btn {
      padding: 8px 16px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      border-radius: 8px;
      color: var(--text-muted);
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .model-btn:hover { border-color: var(--accent); color: var(--text-secondary); }

    .model-btn.active {
      background: var(--glow-gold);
      border-color: var(--accent);
      color: var(--accent);
    }

    .model-badge {
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 700;
    }

    .model-badge.flash { background: #22c55e; color: #000; }
    .model-badge.pro { background: #8b5cf6; color: #fff; }

    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      border-radius: 10px;
      padding: 0.75rem 1rem;
      margin: 1rem auto;
      max-width: 700px;
      color: var(--tier-e);
      font-size: 0.85rem;
      display: none;
    }

    .error-message.active { display: block; }

    /* Loading Overlay */
    .loading-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(10, 10, 10, 0.95);
      backdrop-filter: blur(10px);
      z-index: 200;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    .loading-overlay.active { display: flex; }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 3px solid var(--border-primary);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1.5rem;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .loading-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .loading-status {
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
    }

    .loading-progress {
      width: 300px;
      height: 4px;
      background: var(--border-primary);
      border-radius: 2px;
      overflow: hidden;
    }

    .loading-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-light));
      width: 0%;
      transition: width 0.3s;
    }

    /* Results Section */
    .results-section {
      display: none;
      margin-top: 2rem;
    }

    .results-section.active { display: block; }

    /* Risk Banner */
    .risk-banner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.25rem 1.5rem;
      border-radius: 16px;
      margin-bottom: 1.5rem;
      border: 1px solid;
    }

    .risk-banner.low {
      background: rgba(34, 197, 94, 0.1);
      border-color: rgba(34, 197, 94, 0.3);
    }

    .risk-banner.medium {
      background: rgba(234, 179, 8, 0.1);
      border-color: rgba(234, 179, 8, 0.3);
    }

    .risk-banner.high {
      background: rgba(239, 68, 68, 0.1);
      border-color: rgba(239, 68, 68, 0.3);
    }

    .risk-badge {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .risk-letter {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.75rem;
      font-weight: 800;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.1);
    }

    .risk-info h3 {
      font-size: 1.1rem;
      font-weight: 700;
    }

    .risk-info p {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .risk-confidence {
      text-align: right;
    }

    .risk-confidence .value {
      font-size: 2rem;
      font-weight: 800;
    }

    .risk-confidence .label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }

    /* Report Grid */
    .report-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .report-card {
      background: var(--bg-card);
      border: 1px solid var(--border-primary);
      border-radius: 16px;
      padding: 1.25rem;
    }

    .report-card.full-width {
      grid-column: 1 / -1;
    }

    .report-card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border-secondary);
    }

    .report-card-header svg {
      width: 18px;
      height: 18px;
      color: var(--accent);
    }

    .report-card-header h3 {
      font-size: 0.85rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .data-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .data-item {
      background: var(--bg-secondary);
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--border-secondary);
    }

    .data-item.full { grid-column: 1 / -1; }

    .data-label {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .data-value {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .data-value.positive { color: var(--tier-a); }
    .data-value.warning { color: var(--tier-c); }
    .data-value.negative { color: var(--tier-e); }

    /* Red Flags */
    .red-flags-section {
      background: rgba(239, 68, 68, 0.08);
      border: 1px solid rgba(239, 68, 68, 0.25);
      border-radius: 12px;
      padding: 1rem;
      margin-top: 1rem;
    }

    .red-flags-header {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--tier-e);
      font-weight: 700;
      margin-bottom: 0.75rem;
    }

    .red-flags-header svg { width: 16px; height: 16px; }

    .red-flags-list {
      list-style: none;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .red-flags-list li {
      padding: 6px 0;
      padding-left: 20px;
      position: relative;
    }

    .red-flags-list li::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 8px;
      height: 8px;
      background: var(--tier-e);
      border-radius: 50%;
    }

    /* Officers List */
    .officers-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .officer-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-primary);
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 0.85rem;
    }

    .officer-tag .title {
      color: var(--text-muted);
      font-size: 0.75rem;
    }

    /* Stat Row */
    .stat-row {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .stat-item {
      text-align: center;
      padding: 12px;
      background: var(--bg-secondary);
      border-radius: 10px;
      border: 1px solid var(--border-secondary);
    }

    .stat-item .value {
      font-size: 1.25rem;
      font-weight: 700;
    }

    .stat-item .label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Summary */
    .summary-text {
      font-size: 0.9rem;
      line-height: 1.8;
      color: var(--text-secondary);
    }

    /* Sources */
    .sources-section {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-secondary);
    }

    .sources-title {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .sources-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .source-link {
      font-size: 0.8rem;
      color: var(--accent);
      text-decoration: none;
      padding: 4px 10px;
      background: var(--bg-secondary);
      border-radius: 6px;
      transition: all 0.2s;
    }

    .source-link:hover {
      background: var(--glow-gold);
    }

    /* Actions */
    .actions-row {
      display: flex;
      gap: 12px;
      margin-top: 1.5rem;
    }

    .action-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 20px;
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .action-btn svg { width: 18px; height: 18px; }

    .action-btn.primary {
      background: linear-gradient(135deg, var(--accent), #d97706);
      border: none;
      color: #000;
    }

    .action-btn.primary:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 20px rgba(234, 179, 8, 0.4);
    }

    .action-btn.secondary {
      background: transparent;
      border: 1px dashed var(--border-primary);
      color: var(--text-muted);
    }

    .action-btn.secondary:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .report-grid {
        grid-template-columns: 1fr;
      }
      .data-grid {
        grid-template-columns: 1fr;
      }
      .stat-row {
        grid-template-columns: 1fr;
      }
      .risk-banner {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }
      .risk-confidence {
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="bg-grid"></div>
  <div class="bg-gradient"></div>

  <!-- Header -->
  <header class="main-header">
    <div class="header-logo">
      <svg viewBox="0 0 64 64" fill="none">
        <defs>
          <radialGradient id="pg" cx="35%" cy="35%" r="60%">
            <stop offset="0%" stop-color="#fcd34d"/>
            <stop offset="50%" stop-color="#eab308"/>
            <stop offset="100%" stop-color="#ca8a04"/>
          </radialGradient>
          <linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#f97316"/>
            <stop offset="100%" stop-color="#dc2626"/>
          </linearGradient>
        </defs>
        <ellipse cx="32" cy="32" rx="28" ry="8" stroke="url(#rg)" stroke-width="2.5" fill="none" transform="rotate(-20 32 32)" stroke-dasharray="70 140" opacity="0.6"/>
        <circle cx="32" cy="32" r="12" fill="url(#pg)"/>
        <ellipse cx="28" cy="28" rx="4" ry="3" fill="#fef3c7" opacity="0.4"/>
        <ellipse cx="32" cy="32" rx="28" ry="8" stroke="url(#rg)" stroke-width="2.5" fill="none" transform="rotate(-20 32 32)" stroke-dasharray="70 140" stroke-dashoffset="-70"/>
        <circle cx="58" cy="28" r="4" fill="#a855f7"/>
      </svg>
      <h1>AblesAI <span>Business Intelligence</span></h1>
    </div>
    <div class="header-actions">
      <div class="api-input-wrap">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        <input type="password" id="apiKey" placeholder="Gemini API Key">
      </div>
      <button class="theme-toggle" id="themeToggle">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Search Section -->
    <section class="search-section" id="searchSection">
      <svg class="search-logo" viewBox="0 0 64 64" fill="none">
        <defs>
          <radialGradient id="pg2" cx="35%" cy="35%" r="60%">
            <stop offset="0%" stop-color="#fcd34d"/>
            <stop offset="50%" stop-color="#eab308"/>
            <stop offset="100%" stop-color="#ca8a04"/>
          </radialGradient>
        </defs>
        <circle cx="32" cy="32" r="28" fill="url(#pg2)" opacity="0.15"/>
        <circle cx="32" cy="32" r="20" fill="url(#pg2)" opacity="0.3"/>
        <circle cx="32" cy="32" r="12" fill="url(#pg2)"/>
        <ellipse cx="28" cy="28" rx="3" ry="2" fill="#fef3c7" opacity="0.5"/>
      </svg>
      <h1 class="search-title">Deep Business Intelligence</h1>
      <p class="search-subtitle">Comprehensive research, risk assessment, and compliance analysis powered by AI</p>
      
      <div class="search-input-container">
        <input type="text" class="search-input" id="entityName" placeholder="Enter business name (e.g., Acme Corporation)">
        <button class="search-btn" onclick="runDeepResearch()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          Deep Research
        </button>
      </div>

      <div class="model-selector">
        <button class="model-btn active" id="modelPro" data-model="gemini-3-pro-preview">
          <span class="model-badge pro">PRO</span>
          Gemini Pro
        </button>
        <button class="model-btn" id="modelFlash" data-model="gemini-2.5-flash">
          <span class="model-badge flash">FLASH</span>
          Gemini Flash
        </button>
      </div>

      <div class="error-message" id="errorMessage"></div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="resultsSection">
      <!-- Risk Banner -->
      <div class="risk-banner" id="riskBanner">
        <div class="risk-badge">
          <div class="risk-letter" id="riskLetter">?</div>
          <div class="risk-info">
            <h3 id="riskLabel">Risk Assessment</h3>
            <p id="businessNameDisplay">Loading...</p>
          </div>
        </div>
        <div class="risk-confidence">
          <div class="value" id="confidenceValue">0%</div>
          <div class="label">Research Confidence</div>
        </div>
      </div>

      <!-- Report Grid -->
      <div class="report-grid">
        <!-- Company Overview -->
        <div class="report-card">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            <h3>Company Overview</h3>
          </div>
          <div class="data-grid">
            <div class="data-item full">
              <div class="data-label">Legal Name</div>
              <div class="data-value" id="legalName">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">DBA</div>
              <div class="data-value" id="dbaName">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">Entity Type</div>
              <div class="data-value" id="entityType">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">State</div>
              <div class="data-value" id="stateName">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">Formation Date</div>
              <div class="data-value" id="formationDate">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">Status</div>
              <div class="data-value" id="entityStatus">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">Registered Agent</div>
              <div class="data-value" id="regAgent">--</div>
            </div>
            <div class="data-item full">
              <div class="data-label">Address</div>
              <div class="data-value" id="address">--</div>
            </div>
          </div>
        </div>

        <!-- Operations -->
        <div class="report-card">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
            <h3>Business Operations</h3>
          </div>
          <div class="data-grid">
            <div class="data-item full">
              <div class="data-label">Industry</div>
              <div class="data-value" id="industry">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">NAICS Code</div>
              <div class="data-value" id="naicsCode">--</div>
            </div>
            <div class="data-item">
              <div class="data-label">Locations</div>
              <div class="data-value" id="locations">--</div>
            </div>
            <div class="data-item full">
              <div class="data-label">Business Description</div>
              <div class="data-value" id="description" style="font-weight: 400; font-size: 0.85rem;">--</div>
            </div>
          </div>
        </div>

        <!-- Financial Indicators -->
        <div class="report-card">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
            <h3>Financial Indicators</h3>
          </div>
          <div class="stat-row">
            <div class="stat-item">
              <div class="value" id="revenueEst">--</div>
              <div class="label">Revenue Est.</div>
            </div>
            <div class="stat-item">
              <div class="value" id="employeeCount">--</div>
              <div class="label">Employees</div>
            </div>
            <div class="stat-item">
              <div class="value" id="yearsInBusiness">--</div>
              <div class="label">Years</div>
            </div>
          </div>
          <div class="data-item full" style="margin-top: 12px;">
            <div class="data-label">Growth Trend</div>
            <div class="data-value" id="growthTrend">--</div>
          </div>
        </div>

        <!-- Ownership & Management -->
        <div class="report-card">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            <h3>Ownership & Management</h3>
          </div>
          <div class="data-item full" style="margin-bottom: 12px;">
            <div class="data-label">Ownership Structure</div>
            <div class="data-value" id="ownershipStructure">--</div>
          </div>
          <div class="officers-list" id="officersList">
            <span style="color: var(--text-muted); font-size: 0.85rem;">No officers found</span>
          </div>
        </div>

        <!-- Compliance & Legal -->
        <div class="report-card">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            <h3>Compliance & Legal</h3>
          </div>
          <div class="stat-row">
            <div class="stat-item">
              <div class="value" id="lawsuitsCount">0</div>
              <div class="label">Lawsuits</div>
            </div>
            <div class="stat-item">
              <div class="value" id="liensCount">0</div>
              <div class="label">Liens</div>
            </div>
            <div class="stat-item">
              <div class="value" id="uccCount">0</div>
              <div class="label">UCC Filings</div>
            </div>
          </div>
          <div class="data-item full" style="margin-top: 12px;">
            <div class="data-label">Licenses</div>
            <div class="data-value" id="licenses" style="font-weight: 400; font-size: 0.85rem;">--</div>
          </div>
        </div>

        <!-- Reputation -->
        <div class="report-card">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            <h3>Reputation</h3>
          </div>
          <div class="stat-row">
            <div class="stat-item">
              <div class="value" id="bbbRating">--</div>
              <div class="label">BBB Rating</div>
            </div>
            <div class="stat-item">
              <div class="value" id="reviewScore">--</div>
              <div class="label">Review Score</div>
            </div>
            <div class="stat-item">
              <div class="value" id="reviewCount">0</div>
              <div class="label">Reviews</div>
            </div>
          </div>
          <div class="data-item full" style="margin-top: 12px;">
            <div class="data-label">News Mentions</div>
            <div class="data-value" id="newsMentions" style="font-weight: 400; font-size: 0.85rem;">--</div>
          </div>
        </div>

        <!-- Risk Assessment (Full Width) -->
        <div class="report-card full-width">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            <h3>Risk Assessment</h3>
          </div>
          
          <div class="stat-row" style="margin-bottom: 1rem;">
            <div class="stat-item">
              <div class="value" id="industryRisks">0</div>
              <div class="label">Industry Risks</div>
            </div>
            <div class="stat-item">
              <div class="value" id="concernsCount">0</div>
              <div class="label">Concerns</div>
            </div>
            <div class="stat-item">
              <div class="value" id="redFlagsCount">0</div>
              <div class="label">Red Flags</div>
            </div>
          </div>

          <div class="red-flags-section" id="redFlagsSection" style="display: none;">
            <div class="red-flags-header">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"/><line x1="4" y1="22" x2="4" y2="15"/></svg>
              Red Flags Identified
            </div>
            <ul class="red-flags-list" id="redFlagsList"></ul>
          </div>

          <div class="data-item full" id="concernsSection" style="display: none; margin-top: 1rem;">
            <div class="data-label">Operational Concerns</div>
            <div class="data-value" id="concerns" style="font-weight: 400; font-size: 0.85rem;"></div>
          </div>
        </div>

        <!-- Summary (Full Width) -->
        <div class="report-card full-width">
          <div class="report-card-header">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
            <h3>Executive Summary</h3>
          </div>
          <p class="summary-text" id="summaryText">No summary available.</p>
          
          <div class="sources-section" id="sourcesSection">
            <div class="sources-title">Sources</div>
            <div class="sources-list" id="sourcesList"></div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="actions-row">
        <button class="action-btn primary" onclick="copyFullReport()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
          Copy Full Report
        </button>
        <button class="action-btn secondary" onclick="runDeepResearch()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
          Re-run Research
        </button>
      </div>
    </section>
  </main>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <div class="loading-title" id="loadingTitle">Deep Research in Progress</div>
    <div class="loading-status" id="loadingStatus">Initializing...</div>
    <div class="loading-progress">
      <div class="loading-progress-bar" id="loadingProgressBar"></div>
    </div>
  </div>

  <script>
    // ==================== GLOBALS ====================
    let selectedModel = 'gemini-3-pro-preview';
    let loadingInterval;
    let currentResearch = null;

    // ==================== INIT ====================
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      const savedKey = localStorage.getItem('gemini_api_key_deep_research');
      if (savedKey) {
        document.getElementById('apiKey').value = savedKey;
      }
      
      const savedModel = localStorage.getItem('deep_research_model');
      if (savedModel) {
        selectedModel = savedModel;
        updateModelButtons();
      }
    });

    // ==================== EVENT LISTENERS ====================
    document.getElementById('apiKey').addEventListener('input', function() {
      const key = this.value.trim();
      if (key) {
        localStorage.setItem('gemini_api_key_deep_research', key);
      }
    });

    document.getElementById('entityName').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') runDeepResearch();
    });

    document.getElementById('themeToggle').addEventListener('click', function() {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    document.getElementById('modelPro').addEventListener('click', function() {
      selectedModel = this.dataset.model;
      localStorage.setItem('deep_research_model', selectedModel);
      updateModelButtons();
    });

    document.getElementById('modelFlash').addEventListener('click', function() {
      selectedModel = this.dataset.model;
      localStorage.setItem('deep_research_model', selectedModel);
      updateModelButtons();
    });

    function updateModelButtons() {
      document.getElementById('modelPro').classList.toggle('active', selectedModel.includes('pro'));
      document.getElementById('modelFlash').classList.toggle('active', selectedModel.includes('flash'));
    }

    // ==================== LOADING ====================
    function startLoading(businessName) {
      document.getElementById('loadingOverlay').classList.add('active');
      document.getElementById('loadingTitle').textContent = `Researching: ${businessName}`;
      
      const phases = [
        { msg: 'Searching official registries...', pct: 15 },
        { msg: 'Analyzing SEC and corporate filings...', pct: 30 },
        { msg: 'Checking compliance databases...', pct: 45 },
        { msg: 'Gathering reputation data...', pct: 60 },
        { msg: 'Assessing financial indicators...', pct: 75 },
        { msg: 'Compiling risk assessment...', pct: 90 },
        { msg: 'Generating report...', pct: 100 }
      ];
      
      let phase = 0;
      loadingInterval = setInterval(() => {
        if (phase < phases.length) {
          document.getElementById('loadingStatus').textContent = phases[phase].msg;
          document.getElementById('loadingProgressBar').style.width = phases[phase].pct + '%';
          phase++;
        }
      }, 2500);
    }

    function stopLoading() {
      clearInterval(loadingInterval);
      document.getElementById('loadingOverlay').classList.remove('active');
    }

    // ==================== DEEP RESEARCH PROMPT ====================
    function buildDeepResearchPrompt(businessName) {
      return `You are a comprehensive business research and due diligence analyst.

BUSINESS: "${businessName}"

Conduct thorough deep research using all available web sources and provide a COMPREHENSIVE analysis including:

1. COMPANY OVERVIEW
   - Legal name (exact as registered)
   - DBAs / Trade names
   - Entity type (LLC, Corp, Inc, LP, etc.)
   - State of incorporation
   - Formation/Registration date
   - Current registration status (Active, Inactive, Dissolved, Good Standing)
   - Registered agent name and address
   - Principal business address

2. OWNERSHIP & MANAGEMENT
   - Officers, directors, principals (names and titles)
   - Ownership structure (private, public, subsidiary)
   - Key executives

3. BUSINESS OPERATIONS
   - Industry classification
   - NAICS/SIC codes
   - Business description and model
   - Products/Services offered
   - Number of locations
   - Competitors

4. FINANCIAL INDICATORS
   - Revenue estimates (if available)
   - Employee count estimates
   - Years in business
   - Growth trend indicators
   - Funding history (if applicable)

5. COMPLIANCE & LEGAL
   - Business licenses
   - Regulatory actions or violations
   - Lawsuits (plaintiff or defendant)
   - Liens (tax liens, mechanic's liens)
   - Judgments
   - UCC filings
   - Bankruptcies

6. REPUTATION
   - BBB rating and accreditation
   - Online review scores (Google, Yelp, etc.)
   - Review count
   - News mentions (positive or negative)
   - Awards or recognitions

7. RISK ASSESSMENT
   - Overall risk rating: Low, Medium, or High
   - Red flags identified
   - Industry-specific risks
   - Operational concerns
   - Recommendations

SEARCH STRATEGY:
- Search state Secretary of State / Corporation databases
- Check SEC EDGAR for public filings
- Search OpenCorporates
- Check BBB directory
- Search news sources
- Check court records databases
- Search LinkedIn for company info
- Check industry-specific registries

Return ONLY valid JSON in this exact schema:
{
  "overview": {
    "legal_name": "",
    "dba": "",
    "entity_type": "",
    "state": "",
    "formation_date": "",
    "status": "",
    "registered_agent": "",
    "address": ""
  },
  "ownership": {
    "officers": [{"name": "", "title": ""}],
    "ownership_structure": ""
  },
  "operations": {
    "industry": "",
    "naics": "",
    "description": "",
    "services": [],
    "locations": 0,
    "competitors": []
  },
  "financials": {
    "revenue_estimate": "",
    "employee_count": "",
    "years_in_business": 0,
    "growth_trend": ""
  },
  "compliance": {
    "licenses": [],
    "regulatory_actions": [],
    "lawsuits": [],
    "liens": [],
    "judgments": [],
    "ucc_filings": [],
    "bankruptcies": []
  },
  "reputation": {
    "bbb_rating": "",
    "review_score": "",
    "review_count": 0,
    "news_mentions": [],
    "awards": []
  },
  "risk": {
    "rating": "Low|Medium|High",
    "red_flags": [],
    "industry_risks": [],
    "concerns": []
  },
  "sources": [{"title": "", "url": ""}],
  "summary": "",
  "confidence": 0
}

IMPORTANT:
- Be thorough and comprehensive
- Use actual data from searches, not assumptions
- If information is not found, use empty strings or empty arrays
- Confidence should be 0-100 based on quality of sources found
- Always provide a risk rating even with limited data`;
    }

    // ==================== API CALLS ====================
    async function callGeminiDeepResearch(apiKey, prompt) {
      const url = `https://generativelanguage.googleapis.com/v1beta/models/${selectedModel}:generateContent?key=${apiKey}`;
      
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          tools: [{ google_search: {} }],
          generationConfig: {
            temperature: 0.2,
            topP: 0.8,
            maxOutputTokens: 8192
          }
        })
      });
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.error?.message || 'API request failed');
      }
      
      const data = await response.json();
      const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';
      
      return text;
    }

    function parseJsonResponse(text) {
      try {
        const jsonMatch = text.match(/\{[\s\S]*\}/);
        if (jsonMatch) {
          return JSON.parse(jsonMatch[0]);
        }
      } catch (e) {
        console.error('JSON parse error:', e);
      }
      return null;
    }

    // ==================== MAIN FUNCTION ====================
    async function runDeepResearch() {
      const apiKey = document.getElementById('apiKey').value.trim();
      const businessName = document.getElementById('entityName').value.trim();
      const errorEl = document.getElementById('errorMessage');
      
      errorEl.classList.remove('active');
      
      if (!apiKey) {
        errorEl.textContent = 'Please enter your Gemini API key';
        errorEl.classList.add('active');
        return;
      }
      
      if (!businessName) {
        errorEl.textContent = 'Please enter a business name to research';
        errorEl.classList.add('active');
        return;
      }
      
      startLoading(businessName);
      document.getElementById('searchSection').classList.add('has-results');
      
      try {
        const prompt = buildDeepResearchPrompt(businessName);
        const responseText = await callGeminiDeepResearch(apiKey, prompt);
        const research = parseJsonResponse(responseText);
        
        if (!research) {
          throw new Error('Failed to parse research data. Please try again.');
        }
        
        currentResearch = research;
        displayResults(research, businessName);
        
      } catch (error) {
        errorEl.textContent = 'Error: ' + error.message;
        errorEl.classList.add('active');
      } finally {
        stopLoading();
      }
    }

    // ==================== DISPLAY RESULTS ====================
    function displayResults(research, businessName) {
      document.getElementById('resultsSection').classList.add('active');
      
      // Risk Banner
      const riskRating = research.risk?.rating || 'Unknown';
      const riskBanner = document.getElementById('riskBanner');
      riskBanner.className = 'risk-banner ' + riskRating.toLowerCase();
      
      const riskColors = {
        'Low': 'var(--tier-a)',
        'Medium': 'var(--tier-c)',
        'High': 'var(--tier-e)'
      };
      const riskColor = riskColors[riskRating] || 'var(--text-muted)';
      
      document.getElementById('riskLetter').textContent = riskRating[0] || '?';
      document.getElementById('riskLetter').style.color = riskColor;
      document.getElementById('riskLabel').textContent = `${riskRating} Risk`;
      document.getElementById('riskLabel').style.color = riskColor;
      document.getElementById('businessNameDisplay').textContent = research.overview?.legal_name || businessName;
      document.getElementById('confidenceValue').textContent = (research.confidence || 0) + '%';
      document.getElementById('confidenceValue').style.color = 
        research.confidence >= 70 ? 'var(--tier-a)' : 
        research.confidence >= 50 ? 'var(--tier-c)' : 'var(--tier-e)';
      
      // Company Overview
      document.getElementById('legalName').textContent = research.overview?.legal_name || '--';
      document.getElementById('dbaName').textContent = research.overview?.dba || '--';
      document.getElementById('entityType').textContent = research.overview?.entity_type || '--';
      document.getElementById('stateName').textContent = research.overview?.state || '--';
      document.getElementById('formationDate').textContent = research.overview?.formation_date || '--';
      
      const statusEl = document.getElementById('entityStatus');
      const status = research.overview?.status || '--';
      statusEl.textContent = status;
      statusEl.className = 'data-value';
      if (status.toLowerCase().includes('active') || status.toLowerCase().includes('good')) {
        statusEl.classList.add('positive');
      } else if (status.toLowerCase().includes('inactive') || status.toLowerCase().includes('dissolved')) {
        statusEl.classList.add('negative');
      }
      
      document.getElementById('regAgent').textContent = research.overview?.registered_agent || '--';
      document.getElementById('address').textContent = research.overview?.address || '--';
      
      // Operations
      document.getElementById('industry').textContent = research.operations?.industry || '--';
      document.getElementById('naicsCode').textContent = research.operations?.naics || '--';
      document.getElementById('locations').textContent = research.operations?.locations || '--';
      document.getElementById('description').textContent = research.operations?.description || '--';
      
      // Financials
      document.getElementById('revenueEst').textContent = research.financials?.revenue_estimate || '--';
      document.getElementById('employeeCount').textContent = research.financials?.employee_count || '--';
      document.getElementById('yearsInBusiness').textContent = research.financials?.years_in_business || '--';
      document.getElementById('growthTrend').textContent = research.financials?.growth_trend || '--';
      
      // Ownership
      document.getElementById('ownershipStructure').textContent = research.ownership?.ownership_structure || '--';
      
      const officers = research.ownership?.officers || [];
      const officersList = document.getElementById('officersList');
      if (officers.length > 0) {
        officersList.innerHTML = officers.map(o => 
          `<span class="officer-tag">${o.name || 'Unknown'}<span class="title">${o.title ? ' (' + o.title + ')' : ''}</span></span>`
        ).join('');
      } else {
        officersList.innerHTML = '<span style="color: var(--text-muted); font-size: 0.85rem;">No officers found</span>';
      }
      
      // Compliance
      const lawsuits = research.compliance?.lawsuits?.length || 0;
      const liens = research.compliance?.liens?.length || 0;
      const ucc = research.compliance?.ucc_filings?.length || 0;
      
      const lawsuitsEl = document.getElementById('lawsuitsCount');
      lawsuitsEl.textContent = lawsuits;
      lawsuitsEl.style.color = lawsuits > 0 ? 'var(--tier-e)' : 'var(--tier-a)';
      
      const liensEl = document.getElementById('liensCount');
      liensEl.textContent = liens;
      liensEl.style.color = liens > 0 ? 'var(--tier-e)' : 'var(--tier-a)';
      
      document.getElementById('uccCount').textContent = ucc;
      
      const licenses = research.compliance?.licenses || [];
      document.getElementById('licenses').textContent = licenses.length > 0 ? licenses.join(', ') : 'None found';
      
      // Reputation
      document.getElementById('bbbRating').textContent = research.reputation?.bbb_rating || '--';
      document.getElementById('reviewScore').textContent = research.reputation?.review_score || '--';
      document.getElementById('reviewCount').textContent = research.reputation?.review_count || 0;
      
      const news = research.reputation?.news_mentions || [];
      document.getElementById('newsMentions').textContent = news.length > 0 ? news.slice(0, 3).join('; ') : 'None found';
      
      // Risk Assessment
      const industryRisks = research.risk?.industry_risks?.length || 0;
      const concerns = research.risk?.concerns || [];
      const redFlags = research.risk?.red_flags || [];
      
      document.getElementById('industryRisks').textContent = industryRisks;
      document.getElementById('concernsCount').textContent = concerns.length;
      document.getElementById('redFlagsCount').textContent = redFlags.length;
      document.getElementById('redFlagsCount').style.color = redFlags.length > 0 ? 'var(--tier-e)' : 'var(--tier-a)';
      
      const redFlagsSection = document.getElementById('redFlagsSection');
      if (redFlags.length > 0) {
        redFlagsSection.style.display = 'block';
        document.getElementById('redFlagsList').innerHTML = redFlags.map(f => `<li>${f}</li>`).join('');
      } else {
        redFlagsSection.style.display = 'none';
      }
      
      const concernsSection = document.getElementById('concernsSection');
      if (concerns.length > 0) {
        concernsSection.style.display = 'block';
        document.getElementById('concerns').textContent = concerns.join('; ');
      } else {
        concernsSection.style.display = 'none';
      }
      
      // Summary
      document.getElementById('summaryText').textContent = research.summary || 'No summary available.';
      
      // Sources
      const sources = research.sources || [];
      const sourcesList = document.getElementById('sourcesList');
      if (sources.length > 0) {
        sourcesList.innerHTML = sources.slice(0, 8).map(s => 
          `<a href="${s.url}" target="_blank" rel="noopener noreferrer" class="source-link">${s.title || 'Source'}</a>`
        ).join('');
        document.getElementById('sourcesSection').style.display = 'block';
      } else {
        document.getElementById('sourcesSection').style.display = 'none';
      }
      
      // Scroll to results
      document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // ==================== COPY REPORT ====================
    function copyFullReport() {
      if (!currentResearch) return;
      
      const r = currentResearch;
      const report = `
========================================
BUSINESS INTELLIGENCE REPORT
========================================

RISK RATING: ${r.risk?.rating || 'Unknown'}
CONFIDENCE: ${r.confidence || 0}%

----------------------------------------
COMPANY OVERVIEW
----------------------------------------
Legal Name: ${r.overview?.legal_name || 'N/A'}
DBA: ${r.overview?.dba || 'N/A'}
Entity Type: ${r.overview?.entity_type || 'N/A'}
State: ${r.overview?.state || 'N/A'}
Formation Date: ${r.overview?.formation_date || 'N/A'}
Status: ${r.overview?.status || 'N/A'}
Registered Agent: ${r.overview?.registered_agent || 'N/A'}
Address: ${r.overview?.address || 'N/A'}

----------------------------------------
OWNERSHIP & MANAGEMENT
----------------------------------------
Structure: ${r.ownership?.ownership_structure || 'N/A'}
Officers: ${(r.ownership?.officers || []).map(o => `${o.name} (${o.title || 'N/A'})`).join(', ') || 'N/A'}

----------------------------------------
BUSINESS OPERATIONS
----------------------------------------
Industry: ${r.operations?.industry || 'N/A'}
NAICS: ${r.operations?.naics || 'N/A'}
Locations: ${r.operations?.locations || 'N/A'}
Description: ${r.operations?.description || 'N/A'}

----------------------------------------
FINANCIAL INDICATORS
----------------------------------------
Revenue Estimate: ${r.financials?.revenue_estimate || 'N/A'}
Employees: ${r.financials?.employee_count || 'N/A'}
Years in Business: ${r.financials?.years_in_business || 'N/A'}
Growth Trend: ${r.financials?.growth_trend || 'N/A'}

----------------------------------------
COMPLIANCE & LEGAL
----------------------------------------
Lawsuits: ${r.compliance?.lawsuits?.length || 0}
Liens: ${r.compliance?.liens?.length || 0}
UCC Filings: ${r.compliance?.ucc_filings?.length || 0}
Licenses: ${(r.compliance?.licenses || []).join(', ') || 'None found'}

----------------------------------------
REPUTATION
----------------------------------------
BBB Rating: ${r.reputation?.bbb_rating || 'N/A'}
Review Score: ${r.reputation?.review_score || 'N/A'}
Review Count: ${r.reputation?.review_count || 0}

----------------------------------------
RISK ASSESSMENT
----------------------------------------
Rating: ${r.risk?.rating || 'N/A'}
Red Flags: ${(r.risk?.red_flags || []).join(', ') || 'None'}
Industry Risks: ${(r.risk?.industry_risks || []).join(', ') || 'None'}
Concerns: ${(r.risk?.concerns || []).join(', ') || 'None'}

----------------------------------------
SUMMARY
----------------------------------------
${r.summary || 'No summary available.'}

========================================
Generated by AblesAI Business Intelligence
      `.trim();
      
      navigator.clipboard.writeText(report).then(() => {
        const btn = document.querySelector('.action-btn.primary');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Copied!';
        setTimeout(() => {
          btn.innerHTML = originalText;
        }, 2000);
      });
    }
  </script>
</body>
</html>
